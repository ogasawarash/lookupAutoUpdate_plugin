!function(e){function r(u){if(t[u])return t[u].exports;var d=t[u]={exports:{},id:u,loaded:!1};return e[u].call(d.exports,d,d.exports,r),d.loaded=!0,d.exports}var t={};return r.m=e,r.c=t,r.p="",r(0)}([function(e,r,t){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}var d=t(1),a=u(d),s=t(5),n=u(s),l=t(6),o=u(l),f=t(8),i=u(f),c=t(9),p=u(c),y=t(11),v=u(y),h=t(13),_=u(h),q=t(14),g=u(q),A=t(15),b=u(A),M=t(16),P=u(M),k=t(17),m=u(k),K=t(18),O=u(K),R=t(19),G=u(R),j=t(20),T=u(j),L={rest:{},ui:{}};L.rest.getRecord=a["default"],L.rest.getRecords=n["default"],L.rest.getAllRecordsByQuery=o["default"],L.rest.postRecord=i["default"],L.rest.postRecords=p["default"],L.rest.postAllRecords=v["default"],L.rest.putRecord=_["default"],L.rest.putRecords=g["default"],L.rest.putAllRecords=b["default"],L.rest.deleteRecords=P["default"],L.rest.deleteAllRecords=m["default"],L.rest.deleteAllRecordsByQuery=O["default"],L.rest.upsertRecord=G["default"],L.rest.upsertRecords=T["default"],window.kintoneUtility=L},function(e,r,t){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var d=t(2),a=u(d),s=t(3),n=u(s),l=t(4),o=u(l);r["default"]=function(e){if(!e||!e.app)return(0,a["default"])(n["default"].required.app);if(!e||!e.id)return(0,a["default"])(n["default"].required.id);var r={app:e.app,id:e.id},t=!!e.isGuest;return(0,o["default"])("/k/v1/record","GET",r,t)}},function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(e){return new kintone.Promise(function(r,t){t({status:"error",message:e})})}},function(e,r){e.exports={required:{app:'"params" needs "app".',id:'"params" needs "id".',idOrUpdateKey:'"params" needs "id" or "updateKey".',updateKey:'"params" needs "updateKey", "updateKey.field" and "updateKey.value".'},shouldBeArray:{records:'"records" should be Array.',ids:'"ids" should be Array.'},overLength:{recordsLessThan2000:'"records" should be less than or equal to 2,000.',recordsLessThan1500:'"records" should be less than or equal to 1,500.',ids:'"ids.length" should be less than or equal to 2,000.'},emptyArray:{records:'"records" is empty. "records" needs to contain one record at least.',ids:'"ids" is empty. "ids" needs to contain one id at least.'},notUniqueField:'"params.updateKey" is not unique field.'}},function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(e,r,t,u){return kintone.api(kintone.api.url(e,u),r,t).then(function(e){return e})}},function(e,r,t){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var d=t(2),a=u(d),s=t(3),n=u(s),l=t(4),o=u(l);r["default"]=function(e){if(!e||!e.app)return(0,a["default"])(n["default"].required.app);var r={app:e.app,query:e.query||"",fields:e.fields||[],totalCount:e.totalCount||!1},t=!!e.isGuest;return(0,o["default"])("/k/v1/records","GET",r,t)}},function(e,r,t){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var d=t(2),a=u(d),s=t(3),n=u(s),l=t(4),o=u(l),f=t(7),i=u(f),c=function p(e,r,t){if(!e||!e.app)return(0,a["default"])(n["default"].required.app);var u=i["default"].getRecords,d=r||[];t=t||0;var s={app:e.app,query:e.query?e.query+" limit "+u+" offset "+t:"limit "+u+" offset "+t,fields:e.fields||[]},l=!!e.isGuest;return(0,o["default"])("/k/v1/records","GET",s,l).then(function(r){return d=d.concat(r.records),r.records.length<u?{records:d}:p(e,d,t+u)})};r["default"]=c},function(e,r){e.exports={records:100,getRecords:500,upsertRecords:1500,bulk:2e3}},function(e,r,t){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var d=t(2),a=u(d),s=t(3),n=u(s),l=t(4),o=u(l);r["default"]=function(e){if(!e||!e.app)return(0,a["default"])(n["default"].required.app);var r={app:e.app,record:e.record},t=!!e.isGuest;return(0,o["default"])("/k/v1/record","POST",r,t)}},function(e,r,t){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var d=t(2),a=u(d),s=t(3),n=u(s),l=t(10),o=u(l),f=t(4),i=u(f),c=t(7),p=u(c);r["default"]=function(e){if(!e||!e.app)return(0,a["default"])(n["default"].required.app);if(!Array.isArray(e.records))return(0,a["default"])(n["default"].shouldBeArray.records);if(e.records&&e.records.length>p["default"].bulk)return(0,a["default"])(n["default"].overLength.recordsLessThan2000);if(e.records&&e.records.length<1)return(0,a["default"])(n["default"].emptyArray.records);var r=(0,o["default"])({app:e.app,records:e.records,method:"POST"}),t=!!e.isGuest;return(0,i["default"])("/k/v1/bulkRequest","POST",r,t)}},function(e,r,t){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var d=t(7),a=u(d);r["default"]=function(e){for(var r=a["default"].records,t={requests:[]},u=e.records?e.records.length:e.ids.length,d=Math.ceil(u/r),s=0,n=0;n<d;n++){var l={method:e.method,api:"/k/v1/records.json",payload:{app:e.app}};e.records&&(l.payload.records=e.records.slice(s,s+r)),e.ids&&(l.payload.ids=e.ids.slice(s,s+r)),t.requests.push(l),s+=r}return t}},function(e,r,t){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var d=t(2),a=u(d),s=t(3),n=u(s),l=t(9),o=u(l),f=t(12),i=u(f),c=t(7),p=u(c);r["default"]=function(e){if(!e||!e.app)return(0,a["default"])(n["default"].required.app);if(!Array.isArray(e.records))return(0,a["default"])(n["default"].shouldBeArray.records);if(e.records&&e.records.length<1)return(0,a["default"])(n["default"].emptyArray.records);var r=[],t=function u(t){t=t||0;var d=!!e.isGuest,a={app:e.app,records:(0,i["default"])(e.records,t),isGuest:d};return(0,o["default"])(a).then(function(d){return r=r.concat(d.results),t+=p["default"].bulk,e.records.length<=t?{results:r}:u(t)})};return t()}},function(e,r,t){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var d=t(7),a=u(d);r["default"]=function(e,r){var t=e.length-r>a["default"].bulk?r+a["default"].bulk:e.length;return e.slice(r,t)}},function(e,r,t){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var d=t(2),a=u(d),s=t(3),n=u(s),l=t(4),o=u(l);r["default"]=function(e){if(!e||!e.app)return(0,a["default"])(n["default"].required.app);if(!e.id&&!e.updateKey)return(0,a["default"])(n["default"].required.idOrUpdateKey);var r={app:e.app,record:e.record};e.revision&&(r.revision=e.revision),e.id?r.id=e.id:e.updateKey&&(r.updateKey=e.updateKey);var t=!!e.isGuest;return(0,o["default"])("/k/v1/record","PUT",r,t)}},function(e,r,t){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var d=t(2),a=u(d),s=t(3),n=u(s),l=t(10),o=u(l),f=t(4),i=u(f),c=t(7),p=u(c);r["default"]=function(e){if(!e||!e.app)return(0,a["default"])(n["default"].required.app);if(!Array.isArray(e.records))return(0,a["default"])(n["default"].shouldBeArray.records);if(e.records&&e.records.length>p["default"].bulk)return(0,a["default"])(n["default"].overLength.recordsLessThan2000);if(e.records&&e.records.length<1)return(0,a["default"])(n["default"].emptyArray.records);var r=(0,o["default"])({app:e.app,records:e.records,method:"PUT"}),t=!!e.isGuest;return(0,i["default"])("/k/v1/bulkRequest","POST",r,t)}},function(e,r,t){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var d=t(2),a=u(d),s=t(3),n=u(s),l=t(14),o=u(l),f=t(12),i=u(f),c=t(7),p=u(c);r["default"]=function(e){if(!e||!e.app)return(0,a["default"])(n["default"].required.app);if(!Array.isArray(e.records))return(0,a["default"])(n["default"].shouldBeArray.records);if(e.records&&e.records.length<1)return(0,a["default"])(n["default"].emptyArray.records);var r=[],t=function u(t){t=t||0;var d=!!e.isGuest,a={app:e.app,records:(0,i["default"])(e.records,t),isGuest:d};return(0,o["default"])(a).then(function(d){return r=r.concat(d.results),t+=p["default"].bulk,e.records.length<=t?{results:r}:u(t)})};return t()}},function(e,r,t){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var d=t(2),a=u(d),s=t(3),n=u(s),l=t(10),o=u(l),f=t(4),i=u(f),c=t(7),p=u(c);r["default"]=function(e){if(!e||!e.app)return(0,a["default"])(n["default"].required.app);if(!Array.isArray(e.ids))return(0,a["default"])(n["default"].shouldBeArray.ids);if(e.ids&&e.ids.length>p["default"].bulk)return(0,a["default"])(n["default"].overLength.ids);if(e.ids&&e.ids.length<1)return(0,a["default"])(n["default"].emptyArray.ids);var r=(0,o["default"])({app:e.app,ids:e.ids,method:"DELETE"});e.revisions&&(r.revisions=e.revisions);var t=!!e.isGuest;return(0,i["default"])("/k/v1/bulkRequest","POST",r,t)}},function(e,r,t){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var d=t(2),a=u(d),s=t(3),n=u(s),l=t(16),o=u(l),f=t(12),i=u(f),c=t(7),p=u(c);r["default"]=function(e){if(!e||!e.app)return(0,a["default"])(n["default"].required.app);if(!Array.isArray(e.ids))return(0,a["default"])(n["default"].shouldBeArray.ids);if(e.ids&&e.ids.length<1)return(0,a["default"])(n["default"].emptyArray.ids);var r=[],t=function u(t){t=t||0;var d=!!e.isGuest,a={app:e.app,ids:(0,i["default"])(e.ids,t),isGuest:d};return(0,o["default"])(a).then(function(d){return r=r.concat(d.results),t+=p["default"].bulk,e.ids.length<=t?{results:r}:u(t)})};return t()}},function(e,r,t){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var d=t(6),a=u(d),s=t(17),n=u(s);r["default"]=function(e){return e.fields=["$id"],(0,a["default"])(e).then(function(r){var t=[],u=r.records;if(!u||!u.length)return{};for(var d=0;d<u.length;d++)t.push(u[d].$id.value);var a={app:e.app,ids:t,isGuest:e.isGuest};return(0,n["default"])(a).then(function(e){return e})})}},function(e,r,t){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var d=t(2),a=u(d),s=t(3),n=u(s),l=t(5),o=u(l),f=t(8),i=u(f),c=t(13),p=u(c);r["default"]=function(e){"use stiirict";return e&&e.app?e.updateKey&&e.updateKey.field&&(e.updateKey.value||""===e.updateKey.value)?(e.query=e.updateKey.field+' = "'+e.updateKey.value+'"',(0,o["default"])(e).then(function(r){return""===e.updateKey.value||r.records.length<1?(e.record[e.updateKey.field]={value:e.updateKey.value},(0,i["default"])(e)):1===r.records.length?(0,p["default"])(e):(0,a["default"])(n["default"].notUniqueField)})):(0,a["default"])(n["default"].required.updateKey):(0,a["default"])(n["default"].required.app)}},function(e,r,t){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var d=t(2),a=u(d),s=t(3),n=u(s),l=t(10),o=u(l),f=t(6),i=u(f),c=t(11),p=(u(c),t(15)),y=(u(p),t(4)),v=u(y),h=t(7),_=u(h);r["default"]=function(e){if(!e||!e.app)return(0,a["default"])(n["default"].required.app);if(!Array.isArray(e.records))return(0,a["default"])(n["default"].shouldBeArray.records);if(e.records&&e.records.length>_["default"].upsertRecords)return(0,a["default"])(n["default"].overLength.recordsLessThan1500);if(e.records&&e.records.length<1)return(0,a["default"])(n["default"].emptyArray.records);var r=function(e,r){if(""===r.updateKey.value)return!1;for(var t=0;t<e.length;t++)if(e[t][r.updateKey.field].value===r.updateKey.value)return!0;return!1},t=function(r,t){var u=(0,o["default"])({app:e.app,records:r,method:"POST"}),d=(0,o["default"])({app:e.app,records:t,method:"PUT"}),a={requests:u.requests.concat(d.requests)},s=!!e.isGuest;return(0,v["default"])("/k/v1/bulkRequest","POST",a,s)};return(0,i["default"])(e).then(function(u){for(var d=u.records,a=e.records,s=[],n=[],l=0;l<a.length;l++)if(r(d,a[l]))s.push(a[l]);else{var o=a[l].record;o[a[l].updateKey.field]={value:a[l].updateKey.value},n.push(o)}return t(n,s)})}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8va2ludG9uZVV0aWxpdHkubWluLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBiOTQ3MDMyNDMwMDg0Y2MzYTkxNiIsIndlYnBhY2s6Ly8vLi9zcmMvanMvbWFpbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvcmVzdC9nZXRSZWNvcmQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3Jlc3QvY29tbW9uL2NyZWF0ZUVycm9yLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9yZXN0L3Jlc291cmNlL2Vycm9yTWVzc2FnZXMuanNvbiIsIndlYnBhY2s6Ly8vLi9zcmMvanMvcmVzdC9jb21tb24vc2VuZFJlcXVlc3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3Jlc3QvZ2V0UmVjb3Jkcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvcmVzdC9nZXRBbGxSZWNvcmRzQnlRdWVyeS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvcmVzdC9yZXNvdXJjZS9saW1pdC5qc29uIiwid2VicGFjazovLy8uL3NyYy9qcy9yZXN0L3Bvc3RSZWNvcmQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3Jlc3QvcG9zdFJlY29yZHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3Jlc3QvY29tbW9uL21ha2VCdWxrUGFyYW0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3Jlc3QvcG9zdEFsbFJlY29yZHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3Jlc3QvY29tbW9uL3NsaWNlQXJyYXkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3Jlc3QvcHV0UmVjb3JkLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9yZXN0L3B1dFJlY29yZHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3Jlc3QvcHV0QWxsUmVjb3Jkcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvcmVzdC9kZWxldGVSZWNvcmRzLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9yZXN0L2RlbGV0ZUFsbFJlY29yZHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3Jlc3QvZGVsZXRlQWxsUmVjb3Jkc0J5UXVlcnkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3Jlc3QvdXBzZXJ0UmVjb3JkLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9yZXN0L3Vwc2VydFJlY29yZHMuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX2dldFJlY29yZCIsIl9nZXRSZWNvcmQyIiwiX2dldFJlY29yZHMiLCJfZ2V0UmVjb3JkczIiLCJfZ2V0QWxsUmVjb3Jkc0J5UXVlcnkiLCJfZ2V0QWxsUmVjb3Jkc0J5UXVlcnkyIiwiX3Bvc3RSZWNvcmQiLCJfcG9zdFJlY29yZDIiLCJfcG9zdFJlY29yZHMiLCJfcG9zdFJlY29yZHMyIiwiX3Bvc3RBbGxSZWNvcmRzIiwiX3Bvc3RBbGxSZWNvcmRzMiIsIl9wdXRSZWNvcmQiLCJfcHV0UmVjb3JkMiIsIl9wdXRSZWNvcmRzIiwiX3B1dFJlY29yZHMyIiwiX3B1dEFsbFJlY29yZHMiLCJfcHV0QWxsUmVjb3JkczIiLCJfZGVsZXRlUmVjb3JkcyIsIl9kZWxldGVSZWNvcmRzMiIsIl9kZWxldGVBbGxSZWNvcmRzIiwiX2RlbGV0ZUFsbFJlY29yZHMyIiwiX2RlbGV0ZUFsbFJlY29yZHNCeVF1ZXJ5IiwiX2RlbGV0ZUFsbFJlY29yZHNCeVF1ZXJ5MiIsIl91cHNlcnRSZWNvcmQiLCJfdXBzZXJ0UmVjb3JkMiIsIl91cHNlcnRSZWNvcmRzIiwiX3Vwc2VydFJlY29yZHMyIiwia2ludG9uZVV0aWxpdHkiLCJyZXN0IiwidWkiLCJnZXRSZWNvcmQiLCJnZXRSZWNvcmRzIiwiZ2V0QWxsUmVjb3Jkc0J5UXVlcnkiLCJwb3N0UmVjb3JkIiwicG9zdFJlY29yZHMiLCJwb3N0QWxsUmVjb3JkcyIsInB1dFJlY29yZCIsInB1dFJlY29yZHMiLCJwdXRBbGxSZWNvcmRzIiwiZGVsZXRlUmVjb3JkcyIsImRlbGV0ZUFsbFJlY29yZHMiLCJkZWxldGVBbGxSZWNvcmRzQnlRdWVyeSIsInVwc2VydFJlY29yZCIsInVwc2VydFJlY29yZHMiLCJ3aW5kb3ciLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiX2NyZWF0ZUVycm9yIiwiX2NyZWF0ZUVycm9yMiIsIl9lcnJvck1lc3NhZ2VzIiwiX2Vycm9yTWVzc2FnZXMyIiwiX3NlbmRSZXF1ZXN0IiwiX3NlbmRSZXF1ZXN0MiIsInBhcmFtcyIsImFwcCIsInJlcXVpcmVkIiwicGFyYW0iLCJpc0d1ZXN0IiwibWVzc2FnZSIsImtpbnRvbmUiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInN0YXR1cyIsImlkT3JVcGRhdGVLZXkiLCJ1cGRhdGVLZXkiLCJzaG91bGRCZUFycmF5IiwicmVjb3JkcyIsImlkcyIsIm92ZXJMZW5ndGgiLCJyZWNvcmRzTGVzc1RoYW4yMDAwIiwicmVjb3Jkc0xlc3NUaGFuMTUwMCIsImVtcHR5QXJyYXkiLCJub3RVbmlxdWVGaWVsZCIsImFwaSIsIm1ldGhvZCIsInVybCIsInRoZW4iLCJyZXNwb25zZSIsInF1ZXJ5IiwiZmllbGRzIiwidG90YWxDb3VudCIsIl9saW1pdCIsIl9saW1pdDIiLCJvZmZzZXQiLCJMSU1JVCIsImFsbFJlY29yZHMiLCJjb25jYXQiLCJsZW5ndGgiLCJidWxrIiwicmVjb3JkIiwiX21ha2VCdWxrUGFyYW0iLCJfbWFrZUJ1bGtQYXJhbTIiLCJBcnJheSIsImlzQXJyYXkiLCJidWxrUGFyYW0iLCJyZXF1ZXN0cyIsImxvb3BUaW1lcyIsIk1hdGgiLCJjZWlsIiwiYmVnaW4iLCJpIiwicmVxdWVzdCIsInBheWxvYWQiLCJzbGljZSIsInB1c2giLCJfc2xpY2VBcnJheSIsIl9zbGljZUFycmF5MiIsInJlc3VsdHMiLCJwb3N0QWxsIiwiYXJyIiwiZW5kIiwicmV2aXNpb24iLCJwdXRBbGwiLCJyZXZpc2lvbnMiLCJkZWxldGVBbGwiLCJyZXNwIiwiJGlkIiwiZmllbGQiLCJkb2VzRXhpc3RTYW1lRmllbGRWYWx1ZSIsImNvbXBhcmVkUmVjb3JkIiwic2VuZFVwc2VydEJ1bGtSZXF1ZXN0IiwicG9zdEJ1bGtQYXJhbSIsInB1dEJ1bGtQYXJhbSJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NJbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFFLE9BR0EsSUFBQUMsR0FBQUYsRUFBQUQsSUFDQUUsV0FDQUUsR0FBQUosRUFDQUssUUFBQSxFQVVBLE9BTkFQLEdBQUFFLEdBQUFNLEtBQUFILEVBQUFELFFBQUFDLElBQUFELFFBQUFILEdBR0FJLEVBQUFFLFFBQUEsRUFHQUYsRUFBQUQsUUF2QkEsR0FBQUQsS0FxQ0EsT0FUQUYsR0FBQVEsRUFBQVQsRUFHQUMsRUFBQVMsRUFBQVAsRUFHQUYsRUFBQVUsRUFBQSxHQUdBVixFQUFBLEtETU0sU0FBU0ksRUFBUUQsRUFBU0gsR0U1Q2hDLFlGd0dDLFNBQVNXLEdBQXVCQyxHQUFPLE1BQU9BLElBQU9BLEVBQUlDLFdBQWFELEdBQVFFLFVBQVNGLEdFdEd4RixHQUFBRyxHQUFBZixFQUFBLEdGZ0RLZ0IsRUFBY0wsRUFBdUJJLEdFL0MxQ0UsRUFBQWpCLEVBQUEsR0ZtREtrQixFQUFlUCxFQUF1Qk0sR0VsRDNDRSxFQUFBbkIsRUFBQSxHRnNES29CLEVBQXlCVCxFQUF1QlEsR0VyRHJERSxFQUFBckIsRUFBQSxHRnlES3NCLEVBQWVYLEVBQXVCVSxHRXhEM0NFLEVBQUF2QixFQUFBLEdGNERLd0IsRUFBZ0JiLEVBQXVCWSxHRTNENUNFLEVBQUF6QixFQUFBLElGK0RLMEIsRUFBbUJmLEVBQXVCYyxHRTlEL0NFLEVBQUEzQixFQUFBLElGa0VLNEIsRUFBY2pCLEVBQXVCZ0IsR0VqRTFDRSxFQUFBN0IsRUFBQSxJ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QUFLdEMsRUFBUWtDLFFBQ3JCLENBQ0gsR0FBSVgsR0FBU3ZCLEVBQVFrQyxHQUFHWCxNQUN4QkEsR0FBT3ZCLEVBQVFrQyxHQUFHcEMsVUFBVXFELFFBQ3hCeEUsTUFBT3FCLEVBQVFrQyxHQUFHcEMsVUFBVW5CLE9BRWhDYixFQUFZd0UsS0FBS2YsR0FJekIsTUFBTytCLEdBQXNCeEYsRUFBYUciLCJmaWxlIjoia2ludG9uZVV0aWxpdHkubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX2dldFJlY29yZCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX2dldFJlY29yZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRSZWNvcmQpO1xuXHRcblx0dmFyIF9nZXRSZWNvcmRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XG5cdHZhciBfZ2V0UmVjb3JkczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRSZWNvcmRzKTtcblx0XG5cdHZhciBfZ2V0QWxsUmVjb3Jkc0J5UXVlcnkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9nZXRBbGxSZWNvcmRzQnlRdWVyeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRBbGxSZWNvcmRzQnlRdWVyeSk7XG5cdFxuXHR2YXIgX3Bvc3RSZWNvcmQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHRcblx0dmFyIF9wb3N0UmVjb3JkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3RSZWNvcmQpO1xuXHRcblx0dmFyIF9wb3N0UmVjb3JkcyA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdFxuXHR2YXIgX3Bvc3RSZWNvcmRzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3RSZWNvcmRzKTtcblx0XG5cdHZhciBfcG9zdEFsbFJlY29yZHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0XG5cdHZhciBfcG9zdEFsbFJlY29yZHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9zdEFsbFJlY29yZHMpO1xuXHRcblx0dmFyIF9wdXRSZWNvcmQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0XG5cdHZhciBfcHV0UmVjb3JkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3B1dFJlY29yZCk7XG5cdFxuXHR2YXIgX3B1dFJlY29yZHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdHZhciBfcHV0UmVjb3JkczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wdXRSZWNvcmRzKTtcblx0XG5cdHZhciBfcHV0QWxsUmVjb3JkcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHRcblx0dmFyIF9wdXRBbGxSZWNvcmRzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3B1dEFsbFJlY29yZHMpO1xuXHRcblx0dmFyIF9kZWxldGVSZWNvcmRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cdFxuXHR2YXIgX2RlbGV0ZVJlY29yZHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVsZXRlUmVjb3Jkcyk7XG5cdFxuXHR2YXIgX2RlbGV0ZUFsbFJlY29yZHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblx0XG5cdHZhciBfZGVsZXRlQWxsUmVjb3JkczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZWxldGVBbGxSZWNvcmRzKTtcblx0XG5cdHZhciBfZGVsZXRlQWxsUmVjb3Jkc0J5UXVlcnkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdHZhciBfZGVsZXRlQWxsUmVjb3Jkc0J5UXVlcnkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVsZXRlQWxsUmVjb3Jkc0J5UXVlcnkpO1xuXHRcblx0dmFyIF91cHNlcnRSZWNvcmQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcblx0XG5cdHZhciBfdXBzZXJ0UmVjb3JkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Vwc2VydFJlY29yZCk7XG5cdFxuXHR2YXIgX3Vwc2VydFJlY29yZHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0XG5cdHZhciBfdXBzZXJ0UmVjb3JkczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91cHNlcnRSZWNvcmRzKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHR2YXIga2ludG9uZVV0aWxpdHkgPSB7XG5cdCAgICByZXN0OiB7fSxcblx0ICAgIHVpOiB7fVxuXHR9O1xuXHRraW50b25lVXRpbGl0eS5yZXN0LmdldFJlY29yZCA9IF9nZXRSZWNvcmQyLmRlZmF1bHQ7XG5cdGtpbnRvbmVVdGlsaXR5LnJlc3QuZ2V0UmVjb3JkcyA9IF9nZXRSZWNvcmRzMi5kZWZhdWx0O1xuXHRraW50b25lVXRpbGl0eS5yZXN0LmdldEFsbFJlY29yZHNCeVF1ZXJ5ID0gX2dldEFsbFJlY29yZHNCeVF1ZXJ5Mi5kZWZhdWx0O1xuXHRraW50b25lVXRpbGl0eS5yZXN0LnBvc3RSZWNvcmQgPSBfcG9zdFJlY29yZDIuZGVmYXVsdDtcblx0a2ludG9uZVV0aWxpdHkucmVzdC5wb3N0UmVjb3JkcyA9IF9wb3N0UmVjb3JkczIuZGVmYXVsdDtcblx0a2ludG9uZVV0aWxpdHkucmVzdC5wb3N0QWxsUmVjb3JkcyA9IF9wb3N0QWxsUmVjb3JkczIuZGVmYXVsdDtcblx0a2ludG9uZVV0aWxpdHkucmVzdC5wdXRSZWNvcmQgPSBfcHV0UmVjb3JkMi5kZWZhdWx0O1xuXHRraW50b25lVXRpbGl0eS5yZXN0LnB1dFJlY29yZHMgPSBfcHV0UmVjb3JkczIuZGVmYXVsdDtcblx0a2ludG9uZVV0aWxpdHkucmVzdC5wdXRBbGxSZWNvcmRzID0gX3B1dEFsbFJlY29yZHMyLmRlZmF1bHQ7XG5cdGtpbnRvbmVVdGlsaXR5LnJlc3QuZGVsZXRlUmVjb3JkcyA9IF9kZWxldGVSZWNvcmRzMi5kZWZhdWx0O1xuXHRraW50b25lVXRpbGl0eS5yZXN0LmRlbGV0ZUFsbFJlY29yZHMgPSBfZGVsZXRlQWxsUmVjb3JkczIuZGVmYXVsdDtcblx0a2ludG9uZVV0aWxpdHkucmVzdC5kZWxldGVBbGxSZWNvcmRzQnlRdWVyeSA9IF9kZWxldGVBbGxSZWNvcmRzQnlRdWVyeTIuZGVmYXVsdDtcblx0a2ludG9uZVV0aWxpdHkucmVzdC51cHNlcnRSZWNvcmQgPSBfdXBzZXJ0UmVjb3JkMi5kZWZhdWx0O1xuXHRraW50b25lVXRpbGl0eS5yZXN0LnVwc2VydFJlY29yZHMgPSBfdXBzZXJ0UmVjb3JkczIuZGVmYXVsdDtcblx0XG5cdHdpbmRvdy5raW50b25lVXRpbGl0eSA9IGtpbnRvbmVVdGlsaXR5O1xuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9jcmVhdGVFcnJvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVFcnJvcik7XG5cdFxuXHR2YXIgX2Vycm9yTWVzc2FnZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIF9lcnJvck1lc3NhZ2VzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Vycm9yTWVzc2FnZXMpO1xuXHRcblx0dmFyIF9zZW5kUmVxdWVzdCA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHR2YXIgX3NlbmRSZXF1ZXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlbmRSZXF1ZXN0KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHQvKiogRnVuY3Rpb246IGdldFJlY29yZFxyXG5cdCAqICBAcGFyYW0ge29iamVjdH0gcGFyYW1zXHJcblx0ICogIEBwYXJhbSB7bnVtYmVyfSBwYXJhbXMuYXBwXHJcblx0ICogIEBwYXJhbSB7bnVtYmVyfSBwYXJhbXMuaWRcclxuXHQgKiAgQHBhcmFtIHtib29sZWFufSBwYXJhbXMuaXNHdWVzdFxyXG5cdCAqXHJcblx0ICogIEByZXR1cm4ge29iamVjdH0gcmVzdWx0XHJcblx0ICovXG5cdGV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcblx0ICAgICd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgICBpZiAoIShwYXJhbXMgJiYgcGFyYW1zLmFwcCkpIHtcblx0ICAgICAgICByZXR1cm4gKDAsIF9jcmVhdGVFcnJvcjIuZGVmYXVsdCkoX2Vycm9yTWVzc2FnZXMyLmRlZmF1bHQucmVxdWlyZWQuYXBwKTtcblx0ICAgIH0gZWxzZSBpZiAoIShwYXJhbXMgJiYgcGFyYW1zLmlkKSkge1xuXHQgICAgICAgIHJldHVybiAoMCwgX2NyZWF0ZUVycm9yMi5kZWZhdWx0KShfZXJyb3JNZXNzYWdlczIuZGVmYXVsdC5yZXF1aXJlZC5pZCk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIHBhcmFtID0ge1xuXHQgICAgICAgIGFwcDogcGFyYW1zLmFwcCxcblx0ICAgICAgICBpZDogcGFyYW1zLmlkXG5cdCAgICB9O1xuXHQgICAgdmFyIGlzR3Vlc3QgPSBwYXJhbXMuaXNHdWVzdCA/IHRydWUgOiBmYWxzZTtcblx0XG5cdCAgICByZXR1cm4gKDAsIF9zZW5kUmVxdWVzdDIuZGVmYXVsdCkoJy9rL3YxL3JlY29yZCcsICdHRVQnLCBwYXJhbSwgaXNHdWVzdCk7XG5cdH07XG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0LyoqIEZ1bmN0aW9uOiBjcmVhdGVFcnJvclxyXG5cdCAqICBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZVxyXG5cdCAqXHJcblx0ICogIEByZXR1cm4ge29iamVjdH0gcHJvbWlzZVxyXG5cdCAqL1xuXHRleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuXHQgICAgcmV0dXJuIG5ldyBraW50b25lLlByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuXHQgICAgICAgIHJlamVjdCh7XG5cdCAgICAgICAgICAgIHN0YXR1czogJ2Vycm9yJyxcblx0ICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVxuXHQgICAgICAgIH0pO1xuXHQgICAgfSk7XG5cdH07XG5cbi8qKiovIH0sXG4vKiAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0XHRcInJlcXVpcmVkXCI6IHtcblx0XHRcdFwiYXBwXCI6IFwiXFxcInBhcmFtc1xcXCIgbmVlZHMgXFxcImFwcFxcXCIuXCIsXG5cdFx0XHRcImlkXCI6IFwiXFxcInBhcmFtc1xcXCIgbmVlZHMgXFxcImlkXFxcIi5cIixcblx0XHRcdFwiaWRPclVwZGF0ZUtleVwiOiBcIlxcXCJwYXJhbXNcXFwiIG5lZWRzIFxcXCJpZFxcXCIgb3IgXFxcInVwZGF0ZUtleVxcXCIuXCIsXG5cdFx0XHRcInVwZGF0ZUtleVwiOiBcIlxcXCJwYXJhbXNcXFwiIG5lZWRzIFxcXCJ1cGRhdGVLZXlcXFwiLCBcXFwidXBkYXRlS2V5LmZpZWxkXFxcIiBhbmQgXFxcInVwZGF0ZUtleS52YWx1ZVxcXCIuXCJcblx0XHR9LFxuXHRcdFwic2hvdWxkQmVBcnJheVwiOiB7XG5cdFx0XHRcInJlY29yZHNcIjogXCJcXFwicmVjb3Jkc1xcXCIgc2hvdWxkIGJlIEFycmF5LlwiLFxuXHRcdFx0XCJpZHNcIjogXCJcXFwiaWRzXFxcIiBzaG91bGQgYmUgQXJyYXkuXCJcblx0XHR9LFxuXHRcdFwib3Zlckxlbmd0aFwiOiB7XG5cdFx0XHRcInJlY29yZHNMZXNzVGhhbjIwMDBcIjogXCJcXFwicmVjb3Jkc1xcXCIgc2hvdWxkIGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byAyLDAwMC5cIixcblx0XHRcdFwicmVjb3Jkc0xlc3NUaGFuMTUwMFwiOiBcIlxcXCJyZWNvcmRzXFxcIiBzaG91bGQgYmUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIDEsNTAwLlwiLFxuXHRcdFx0XCJpZHNcIjogXCJcXFwiaWRzLmxlbmd0aFxcXCIgc2hvdWxkIGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byAyLDAwMC5cIlxuXHRcdH0sXG5cdFx0XCJlbXB0eUFycmF5XCI6IHtcblx0XHRcdFwicmVjb3Jkc1wiOiBcIlxcXCJyZWNvcmRzXFxcIiBpcyBlbXB0eS4gXFxcInJlY29yZHNcXFwiIG5lZWRzIHRvIGNvbnRhaW4gb25lIHJlY29yZCBhdCBsZWFzdC5cIixcblx0XHRcdFwiaWRzXCI6IFwiXFxcImlkc1xcXCIgaXMgZW1wdHkuIFxcXCJpZHNcXFwiIG5lZWRzIHRvIGNvbnRhaW4gb25lIGlkIGF0IGxlYXN0LlwiXG5cdFx0fSxcblx0XHRcIm5vdFVuaXF1ZUZpZWxkXCI6IFwiXFxcInBhcmFtcy51cGRhdGVLZXlcXFwiIGlzIG5vdCB1bmlxdWUgZmllbGQuXCJcblx0fTtcblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdC8qKiBGdW5jdGlvbjogc2VuZEJ1bGtSZXF1ZXN0XHJcblx0ICogIEBwYXJhbSB7c3RyaW5nfSBhcGlcclxuXHQgKiAgQHBhcmFtIHtzdHJpbmd9IG1ldGhvZFxyXG5cdCAqICBAcGFyYW0ge29iamVjdH0gcGFyYW1cclxuXHQgKiAgQHBhcmFtIHtib29sZWFufSBpc0d1ZXN0XHJcblx0ICogXHJcblx0ICogIEByZXR1cm4gIHtvYmplY3R9IHJlc3VsdFxyXG5cdCAqL1xuXHRleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoYXBpLCBtZXRob2QsIHBhcmFtLCBpc0d1ZXN0KSB7XG5cdCAgICByZXR1cm4ga2ludG9uZS5hcGkoa2ludG9uZS5hcGkudXJsKGFwaSwgaXNHdWVzdCksIG1ldGhvZCwgcGFyYW0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdCAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuXHQgICAgfSk7XG5cdH07XG5cbi8qKiovIH0sXG4vKiA1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX2NyZWF0ZUVycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUVycm9yKTtcblx0XG5cdHZhciBfZXJyb3JNZXNzYWdlcyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgX2Vycm9yTWVzc2FnZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXJyb3JNZXNzYWdlcyk7XG5cdFxuXHR2YXIgX3NlbmRSZXF1ZXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0XG5cdHZhciBfc2VuZFJlcXVlc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VuZFJlcXVlc3QpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdC8qKiBGdW5jdGlvbjogZ2V0UmVjb3Jkc1xyXG5cdCAqICBAcGFyYW0ge29iamVjdH0gcGFyYW1zXHJcblx0ICogIEBwYXJhbSB7bnVtYmVyfSBwYXJhbXMuYXBwXHJcblx0ICogIEBwYXJhbSB7c3RyaW5nfSBwYXJhbXMucXVlcnlcclxuXHQgKiAgQHBhcmFtIHthcnJheX0gcGFyYW1zLmZpZWxkc1xyXG5cdCAqICBAcGFyYW0ge2Jvb2xlYW59IHBhcmFtcy50b3RhbENvdW50XHJcblx0ICogIEBwYXJhbSB7Ym9vbGVhbn0gcGFyYW1zLmlzR3Vlc3RcclxuXHQgKlxyXG5cdCAqICBAcmV0dXJuIHtvYmplY3R9IHJlc3VsdFxyXG5cdCAqL1xuXHRleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAocGFyYW1zKSB7XG5cdCAgICAndXNlIHN0cmljdCc7XG5cdFxuXHQgICAgaWYgKCEocGFyYW1zICYmIHBhcmFtcy5hcHApKSB7XG5cdCAgICAgICAgcmV0dXJuICgwLCBfY3JlYXRlRXJyb3IyLmRlZmF1bHQpKF9lcnJvck1lc3NhZ2VzMi5kZWZhdWx0LnJlcXVpcmVkLmFwcCk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIHBhcmFtID0ge1xuXHQgICAgICAgIGFwcDogcGFyYW1zLmFwcCxcblx0ICAgICAgICBxdWVyeTogcGFyYW1zLnF1ZXJ5IHx8ICcnLFxuXHQgICAgICAgIGZpZWxkczogcGFyYW1zLmZpZWxkcyB8fCBbXSxcblx0ICAgICAgICB0b3RhbENvdW50OiBwYXJhbXMudG90YWxDb3VudCB8fCBmYWxzZVxuXHQgICAgfTtcblx0ICAgIHZhciBpc0d1ZXN0ID0gcGFyYW1zLmlzR3Vlc3QgPyB0cnVlIDogZmFsc2U7XG5cdFxuXHQgICAgcmV0dXJuICgwLCBfc2VuZFJlcXVlc3QyLmRlZmF1bHQpKCcvay92MS9yZWNvcmRzJywgJ0dFVCcsIHBhcmFtLCBpc0d1ZXN0KTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfY3JlYXRlRXJyb3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlRXJyb3IpO1xuXHRcblx0dmFyIF9lcnJvck1lc3NhZ2VzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfZXJyb3JNZXNzYWdlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9lcnJvck1lc3NhZ2VzKTtcblx0XG5cdHZhciBfc2VuZFJlcXVlc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0dmFyIF9zZW5kUmVxdWVzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZW5kUmVxdWVzdCk7XG5cdFxuXHR2YXIgX2xpbWl0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0XG5cdHZhciBfbGltaXQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbGltaXQpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdC8qKiBGdW5jdGlvbjogZ2V0QWxsUmVjb3Jkc0J5UXVlcnlcclxuXHQgKiAgQHBhcmFtIHtvYmplY3R9IHBhcmFtc1xyXG5cdCAqICBAcGFyYW0ge251bWJlcn0gcGFyYW1zLmFwcFxyXG5cdCAqICBAcGFyYW0ge3N0cmluZ30gcGFyYW1zLnF1ZXJ5XHJcblx0ICogIEBwYXJhbSB7YXJyYXl9IHBhcmFtcy5maWVsZHNcclxuXHQgKiAgQHBhcmFtIHtib29sZWFufSBwYXJhbXMuaXNHdWVzdFxyXG5cdCAqXHJcblx0ICogIEByZXR1cm4ge29iamVjdH0gcmVzdWx0XHJcblx0ICovXG5cdHZhciBnZXRBbGxSZWNvcmRzQnlRdWVyeSA9IGZ1bmN0aW9uIGdldEFsbFJlY29yZHNCeVF1ZXJ5KHBhcmFtcywgcmVjb3Jkcywgb2Zmc2V0KSB7XG5cdCAgICAndXNlIHN0cmljdCc7XG5cdFxuXHQgICAgaWYgKCEocGFyYW1zICYmIHBhcmFtcy5hcHApKSB7XG5cdCAgICAgICAgcmV0dXJuICgwLCBfY3JlYXRlRXJyb3IyLmRlZmF1bHQpKF9lcnJvck1lc3NhZ2VzMi5kZWZhdWx0LnJlcXVpcmVkLmFwcCk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIExJTUlUID0gX2xpbWl0Mi5kZWZhdWx0LmdldFJlY29yZHM7XG5cdCAgICB2YXIgYWxsUmVjb3JkcyA9IHJlY29yZHMgfHwgW107XG5cdCAgICBvZmZzZXQgPSBvZmZzZXQgfHwgMDtcblx0ICAgIHZhciBwYXJhbSA9IHtcblx0ICAgICAgICBhcHA6IHBhcmFtcy5hcHAsXG5cdCAgICAgICAgcXVlcnk6IHBhcmFtcy5xdWVyeSA/IHBhcmFtcy5xdWVyeSArICcgbGltaXQgJyArIExJTUlUICsgJyBvZmZzZXQgJyArIG9mZnNldCA6ICdsaW1pdCAnICsgTElNSVQgKyAnIG9mZnNldCAnICsgb2Zmc2V0LFxuXHQgICAgICAgIGZpZWxkczogcGFyYW1zLmZpZWxkcyB8fCBbXVxuXHQgICAgfTtcblx0ICAgIHZhciBpc0d1ZXN0ID0gcGFyYW1zLmlzR3Vlc3QgPyB0cnVlIDogZmFsc2U7XG5cdFxuXHQgICAgcmV0dXJuICgwLCBfc2VuZFJlcXVlc3QyLmRlZmF1bHQpKCcvay92MS9yZWNvcmRzJywgJ0dFVCcsIHBhcmFtLCBpc0d1ZXN0KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHQgICAgICAgIGFsbFJlY29yZHMgPSBhbGxSZWNvcmRzLmNvbmNhdChyZXNwb25zZS5yZWNvcmRzKTtcblx0ICAgICAgICBpZiAocmVzcG9uc2UucmVjb3Jkcy5sZW5ndGggPCBMSU1JVCkge1xuXHQgICAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICAgICAgcmVjb3JkczogYWxsUmVjb3Jkc1xuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gZ2V0QWxsUmVjb3Jkc0J5UXVlcnkocGFyYW1zLCBhbGxSZWNvcmRzLCBvZmZzZXQgKyBMSU1JVCk7XG5cdCAgICB9KTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IGdldEFsbFJlY29yZHNCeVF1ZXJ5O1xuXG4vKioqLyB9LFxuLyogNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSB7XG5cdFx0XCJyZWNvcmRzXCI6IDEwMCxcblx0XHRcImdldFJlY29yZHNcIjogNTAwLFxuXHRcdFwidXBzZXJ0UmVjb3Jkc1wiOiAxNTAwLFxuXHRcdFwiYnVsa1wiOiAyMDAwXG5cdH07XG5cbi8qKiovIH0sXG4vKiA4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX2NyZWF0ZUVycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUVycm9yKTtcblx0XG5cdHZhciBfZXJyb3JNZXNzYWdlcyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgX2Vycm9yTWVzc2FnZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXJyb3JNZXNzYWdlcyk7XG5cdFxuXHR2YXIgX3NlbmRSZXF1ZXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0XG5cdHZhciBfc2VuZFJlcXVlc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VuZFJlcXVlc3QpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdC8qKiBGdW5jdGlvbjogcG9zdFJlY29yZFxyXG5cdCAqICBAcGFyYW0ge29iamVjdH0gcGFyYW1zXHJcblx0ICogIEBwYXJhbSB7bnVtYmVyfSBwYXJhbXMuYXBwXHJcblx0ICogIEBwYXJhbSB7b2JqZWN0fSBwYXJhbXMucmVjb3JkXHJcblx0ICogIEBwYXJhbSB7Ym9vbGVhbn0gcGFyYW1zLmlzR3Vlc3RcclxuXHQgKlxyXG5cdCAqICBAcmV0dXJuIHtvYmplY3R9IHJlc3VsdFxyXG5cdCAqL1xuXHRleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAocGFyYW1zKSB7XG5cdCAgICAndXNlIHN0cmljdCc7XG5cdFxuXHQgICAgaWYgKCEocGFyYW1zICYmIHBhcmFtcy5hcHApKSB7XG5cdCAgICAgICAgcmV0dXJuICgwLCBfY3JlYXRlRXJyb3IyLmRlZmF1bHQpKF9lcnJvck1lc3NhZ2VzMi5kZWZhdWx0LnJlcXVpcmVkLmFwcCk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIHBhcmFtID0ge1xuXHQgICAgICAgIGFwcDogcGFyYW1zLmFwcCxcblx0ICAgICAgICByZWNvcmQ6IHBhcmFtcy5yZWNvcmRcblx0ICAgIH07XG5cdCAgICB2YXIgaXNHdWVzdCA9IHBhcmFtcy5pc0d1ZXN0ID8gdHJ1ZSA6IGZhbHNlO1xuXHRcblx0ICAgIHJldHVybiAoMCwgX3NlbmRSZXF1ZXN0Mi5kZWZhdWx0KSgnL2svdjEvcmVjb3JkJywgJ1BPU1QnLCBwYXJhbSwgaXNHdWVzdCk7XG5cdH07XG5cbi8qKiovIH0sXG4vKiA5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX2NyZWF0ZUVycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUVycm9yKTtcblx0XG5cdHZhciBfZXJyb3JNZXNzYWdlcyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgX2Vycm9yTWVzc2FnZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXJyb3JNZXNzYWdlcyk7XG5cdFxuXHR2YXIgX21ha2VCdWxrUGFyYW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0XG5cdHZhciBfbWFrZUJ1bGtQYXJhbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9tYWtlQnVsa1BhcmFtKTtcblx0XG5cdHZhciBfc2VuZFJlcXVlc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0dmFyIF9zZW5kUmVxdWVzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZW5kUmVxdWVzdCk7XG5cdFxuXHR2YXIgX2xpbWl0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0XG5cdHZhciBfbGltaXQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbGltaXQpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdC8qKiBGdW5jdGlvbjogcG9zdFJlY29yZHNcclxuXHQgKiAgIENhbid0IHJlZ2lzdGVyIG92ZXIgMjAwMCByZWNvcmRzLlxyXG5cdCAqICAgSWYgcmVxdWVzdCBpcyBmYWlsZWQsIG5vIHJlY29yZCBpcyByZWdpc3RlcmQuXHJcblx0ICogIEBwYXJhbSB7b2JqZWN0fSBwYXJhbXNcclxuXHQgKiAgQHBhcmFtIHtudW1iZXJ9IHBhcmFtcy5hcHBcclxuXHQgKiAgQHBhcmFtIHthcnJheX0gcGFyYW1zLnJlY29yZHNcclxuXHQgKiAgQHBhcmFtIHtib29sZWFufSBwYXJhbXMuaXNHdWVzdFxyXG5cdCAqXHJcblx0ICogIEByZXR1cm4ge29iamVjdH0gcmVzdWx0XHJcblx0ICovXG5cdGV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcblx0ICAgICd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgICBpZiAoIShwYXJhbXMgJiYgcGFyYW1zLmFwcCkpIHtcblx0ICAgICAgICByZXR1cm4gKDAsIF9jcmVhdGVFcnJvcjIuZGVmYXVsdCkoX2Vycm9yTWVzc2FnZXMyLmRlZmF1bHQucmVxdWlyZWQuYXBwKTtcblx0ICAgIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkocGFyYW1zLnJlY29yZHMpKSB7XG5cdCAgICAgICAgcmV0dXJuICgwLCBfY3JlYXRlRXJyb3IyLmRlZmF1bHQpKF9lcnJvck1lc3NhZ2VzMi5kZWZhdWx0LnNob3VsZEJlQXJyYXkucmVjb3Jkcyk7XG5cdCAgICB9IGVsc2UgaWYgKHBhcmFtcy5yZWNvcmRzICYmIHBhcmFtcy5yZWNvcmRzLmxlbmd0aCA+IF9saW1pdDIuZGVmYXVsdC5idWxrKSB7XG5cdCAgICAgICAgcmV0dXJuICgwLCBfY3JlYXRlRXJyb3IyLmRlZmF1bHQpKF9lcnJvck1lc3NhZ2VzMi5kZWZhdWx0Lm92ZXJMZW5ndGgucmVjb3Jkc0xlc3NUaGFuMjAwMCk7XG5cdCAgICB9IGVsc2UgaWYgKHBhcmFtcy5yZWNvcmRzICYmIHBhcmFtcy5yZWNvcmRzLmxlbmd0aCA8IDEpIHtcblx0ICAgICAgICByZXR1cm4gKDAsIF9jcmVhdGVFcnJvcjIuZGVmYXVsdCkoX2Vycm9yTWVzc2FnZXMyLmRlZmF1bHQuZW1wdHlBcnJheS5yZWNvcmRzKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgcGFyYW0gPSAoMCwgX21ha2VCdWxrUGFyYW0yLmRlZmF1bHQpKHtcblx0ICAgICAgICBhcHA6IHBhcmFtcy5hcHAsXG5cdCAgICAgICAgcmVjb3JkczogcGFyYW1zLnJlY29yZHMsXG5cdCAgICAgICAgbWV0aG9kOiAnUE9TVCdcblx0ICAgIH0pO1xuXHQgICAgdmFyIGlzR3Vlc3QgPSBwYXJhbXMuaXNHdWVzdCA/IHRydWUgOiBmYWxzZTtcblx0XG5cdCAgICByZXR1cm4gKDAsIF9zZW5kUmVxdWVzdDIuZGVmYXVsdCkoJy9rL3YxL2J1bGtSZXF1ZXN0JywgJ1BPU1QnLCBwYXJhbSwgaXNHdWVzdCk7XG5cdH07XG5cbi8qKiovIH0sXG4vKiAxMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfbGltaXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHRcblx0dmFyIF9saW1pdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9saW1pdCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0LyoqIEZ1bmN0aW9uOiB1cHNlcnRSZWNvcmRzXHJcblx0ICogIEBwYXJhbSB7b2JqZWN0fSBwYXJhbXNcclxuXHQgKiAgQHBhcmFtIHtudW1iZXJ9IHBhcmFtcy5hcHBcclxuXHQgKiAgQHBhcmFtIHthcnJheX0gcGFyYW1zLnJlY29yZHNcclxuXHQgKiAgQHBhcmFtIHthcnJheX0gcGFyYW1zLmlkc1xyXG5cdCAqICBAcGFyYW0ge3N0cmluZ30gcGFyYW1zLm1ldGhvZFxyXG5cdCAqXHJcblx0ICogIEByZXR1cm4ge29iamVjdH0gYnVsa1BhcmFtXHJcblx0ICovXG5cdGV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcblx0ICAgIHZhciBMSU1JVCA9IF9saW1pdDIuZGVmYXVsdC5yZWNvcmRzO1xuXHQgICAgdmFyIGJ1bGtQYXJhbSA9IHtcblx0ICAgICAgICByZXF1ZXN0czogW11cblx0ICAgIH07XG5cdCAgICB2YXIgbGVuZ3RoID0gcGFyYW1zLnJlY29yZHMgPyBwYXJhbXMucmVjb3Jkcy5sZW5ndGggOiBwYXJhbXMuaWRzLmxlbmd0aDtcblx0ICAgIHZhciBsb29wVGltZXMgPSBNYXRoLmNlaWwobGVuZ3RoIC8gTElNSVQpO1xuXHQgICAgdmFyIGJlZ2luID0gMDtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbG9vcFRpbWVzOyBpKyspIHtcblx0ICAgICAgICB2YXIgcmVxdWVzdCA9IHtcblx0ICAgICAgICAgICAgbWV0aG9kOiBwYXJhbXMubWV0aG9kLFxuXHQgICAgICAgICAgICBhcGk6ICcvay92MS9yZWNvcmRzLmpzb24nLFxuXHQgICAgICAgICAgICBwYXlsb2FkOiB7XG5cdCAgICAgICAgICAgICAgICBhcHA6IHBhcmFtcy5hcHBcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgaWYgKHBhcmFtcy5yZWNvcmRzKSByZXF1ZXN0LnBheWxvYWQucmVjb3JkcyA9IHBhcmFtcy5yZWNvcmRzLnNsaWNlKGJlZ2luLCBiZWdpbiArIExJTUlUKTtcblx0ICAgICAgICBpZiAocGFyYW1zLmlkcykgcmVxdWVzdC5wYXlsb2FkLmlkcyA9IHBhcmFtcy5pZHMuc2xpY2UoYmVnaW4sIGJlZ2luICsgTElNSVQpO1xuXHQgICAgICAgIGJ1bGtQYXJhbS5yZXF1ZXN0cy5wdXNoKHJlcXVlc3QpO1xuXHQgICAgICAgIGJlZ2luICs9IExJTUlUO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBidWxrUGFyYW07XG5cdH07XG5cbi8qKiovIH0sXG4vKiAxMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9jcmVhdGVFcnJvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVFcnJvcik7XG5cdFxuXHR2YXIgX2Vycm9yTWVzc2FnZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIF9lcnJvck1lc3NhZ2VzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Vycm9yTWVzc2FnZXMpO1xuXHRcblx0dmFyIF9wb3N0UmVjb3JkcyA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdFxuXHR2YXIgX3Bvc3RSZWNvcmRzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3RSZWNvcmRzKTtcblx0XG5cdHZhciBfc2xpY2VBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHRcblx0dmFyIF9zbGljZUFycmF5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NsaWNlQXJyYXkpO1xuXHRcblx0dmFyIF9saW1pdCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdFxuXHR2YXIgX2xpbWl0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xpbWl0KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHQvKiogRnVuY3Rpb246IHBvc3RBbGxSZWNvcmRzXHJcblx0ICogICBDYW4gcmVnaXN0ZXIgb3ZlciAyMDAwIHJlY29yZHMsIGJ1dCBjYW4ndCBkbyByb2xsYmFjay5cclxuXHQgKiAgQHBhcmFtIHtvYmplY3R9IHBhcmFtc1xyXG5cdCAqICBAcGFyYW0ge251bWJlcn0gcGFyYW1zLmFwcFxyXG5cdCAqICBAcGFyYW0ge2FycmF5fSBwYXJhbXMucmVjb3Jkc1xyXG5cdCAqICBAcGFyYW0ge2Jvb2xlYW59IHBhcmFtcy5pc0d1ZXN0XHJcblx0ICpcclxuXHQgKiAgQHJldHVybiB7b2JqZWN0fSByZXN1bHRcclxuXHQgKi9cblx0ZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKHBhcmFtcykge1xuXHQgICAgJ3VzZSBzdHJpY3QnO1xuXHRcblx0ICAgIGlmICghKHBhcmFtcyAmJiBwYXJhbXMuYXBwKSkge1xuXHQgICAgICAgIHJldHVybiAoMCwgX2NyZWF0ZUVycm9yMi5kZWZhdWx0KShfZXJyb3JNZXNzYWdlczIuZGVmYXVsdC5yZXF1aXJlZC5hcHApO1xuXHQgICAgfSBlbHNlIGlmICghQXJyYXkuaXNBcnJheShwYXJhbXMucmVjb3JkcykpIHtcblx0ICAgICAgICByZXR1cm4gKDAsIF9jcmVhdGVFcnJvcjIuZGVmYXVsdCkoX2Vycm9yTWVzc2FnZXMyLmRlZmF1bHQuc2hvdWxkQmVBcnJheS5yZWNvcmRzKTtcblx0ICAgIH0gZWxzZSBpZiAocGFyYW1zLnJlY29yZHMgJiYgcGFyYW1zLnJlY29yZHMubGVuZ3RoIDwgMSkge1xuXHQgICAgICAgIHJldHVybiAoMCwgX2NyZWF0ZUVycm9yMi5kZWZhdWx0KShfZXJyb3JNZXNzYWdlczIuZGVmYXVsdC5lbXB0eUFycmF5LnJlY29yZHMpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciByZXN1bHRzID0gW107XG5cdFxuXHQgICAgdmFyIHBvc3RBbGwgPSBmdW5jdGlvbiBwb3N0QWxsKGJlZ2luKSB7XG5cdCAgICAgICAgYmVnaW4gPSBiZWdpbiB8fCAwO1xuXHQgICAgICAgIHZhciBpc0d1ZXN0ID0gcGFyYW1zLmlzR3Vlc3QgPyB0cnVlIDogZmFsc2U7XG5cdCAgICAgICAgdmFyIHBhcmFtID0ge1xuXHQgICAgICAgICAgICBhcHA6IHBhcmFtcy5hcHAsXG5cdCAgICAgICAgICAgIHJlY29yZHM6ICgwLCBfc2xpY2VBcnJheTIuZGVmYXVsdCkocGFyYW1zLnJlY29yZHMsIGJlZ2luKSxcblx0ICAgICAgICAgICAgaXNHdWVzdDogaXNHdWVzdFxuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIHJldHVybiAoMCwgX3Bvc3RSZWNvcmRzMi5kZWZhdWx0KShwYXJhbSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0ICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuY29uY2F0KHJlc3BvbnNlLnJlc3VsdHMpO1xuXHQgICAgICAgICAgICBiZWdpbiArPSBfbGltaXQyLmRlZmF1bHQuYnVsaztcblx0ICAgICAgICAgICAgaWYgKHBhcmFtcy5yZWNvcmRzLmxlbmd0aCA8PSBiZWdpbikge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXN1bHRzOiByZXN1bHRzXG5cdCAgICAgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHJldHVybiBwb3N0QWxsKGJlZ2luKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIHBvc3RBbGwoKTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDEyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfbGltaXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHRcblx0dmFyIF9saW1pdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9saW1pdCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0LyoqIEZ1bmN0aW9uOiBzbGljZUFycmF5XHJcblx0ICogIEBwYXJhbSB7YXJyYXl9IGFyclxyXG5cdCAqICBAcGFyYW0ge251bWJlcn0gYmVnaW5cclxuXHQgKlxyXG5cdCAqICBAcmV0dXJuIHtvYmplY3R9IHJlc3VsdFxyXG5cdCAqL1xuXHRleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoYXJyLCBiZWdpbikge1xuXHQgIHZhciBlbmQgPSBhcnIubGVuZ3RoIC0gYmVnaW4gPiBfbGltaXQyLmRlZmF1bHQuYnVsayA/IGJlZ2luICsgX2xpbWl0Mi5kZWZhdWx0LmJ1bGsgOiBhcnIubGVuZ3RoO1xuXHQgIHJldHVybiBhcnIuc2xpY2UoYmVnaW4sIGVuZCk7XG5cdH07XG5cbi8qKiovIH0sXG4vKiAxMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9jcmVhdGVFcnJvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVFcnJvcik7XG5cdFxuXHR2YXIgX2Vycm9yTWVzc2FnZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIF9lcnJvck1lc3NhZ2VzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Vycm9yTWVzc2FnZXMpO1xuXHRcblx0dmFyIF9zZW5kUmVxdWVzdCA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHR2YXIgX3NlbmRSZXF1ZXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlbmRSZXF1ZXN0KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHQvKiogRnVuY3Rpb246IHB1dFJlY29yZFxyXG5cdCAqICBAcGFyYW0ge29iamVjdH0gcGFyYW1zXHJcblx0ICogIEBwYXJhbSB7bnVtYmVyfSBwYXJhbXMuYXBwXHJcblx0ICogIEBwYXJhbSB7bnVtYmVyfSBwYXJhbXMuaWRcclxuXHQgKiAgQHBhcmFtIHtvYmplY3R9IHBhcmFtcy51cGRhdGVLZXlcclxuXHQgKiAgQHBhcmFtIHtzdHJpbmd9IHBhcmFtcy51cGRhdGVLZXkuZmllbGRcclxuXHQgKiAgQHBhcmFtIHtzdHJpbmd9IHBhcmFtcy51cGRhdGVLZXkudmFsdWVcclxuXHQgKiAgQHBhcmFtIHtudW1iZXJ9IHBhcmFtcy5yZXZpc2lvblxyXG5cdCAqICBAcGFyYW0ge29iamVjdH0gcGFyYW1zLnJlY29yZFxyXG5cdCAqICBAcGFyYW0ge2Jvb2xlYW59IHBhcmFtcy5pc0d1ZXN0XHJcblx0ICpcclxuXHQgKiAgQHJldHVybiB7b2JqZWN0fSByZXN1bHRcclxuXHQgKi9cblx0ZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKHBhcmFtcykge1xuXHQgICAgJ3VzZSBzdHJpY3QnO1xuXHRcblx0ICAgIGlmICghKHBhcmFtcyAmJiBwYXJhbXMuYXBwKSkge1xuXHQgICAgICAgIHJldHVybiAoMCwgX2NyZWF0ZUVycm9yMi5kZWZhdWx0KShfZXJyb3JNZXNzYWdlczIuZGVmYXVsdC5yZXF1aXJlZC5hcHApO1xuXHQgICAgfSBlbHNlIGlmICghcGFyYW1zLmlkICYmICFwYXJhbXMudXBkYXRlS2V5KSB7XG5cdCAgICAgICAgcmV0dXJuICgwLCBfY3JlYXRlRXJyb3IyLmRlZmF1bHQpKF9lcnJvck1lc3NhZ2VzMi5kZWZhdWx0LnJlcXVpcmVkLmlkT3JVcGRhdGVLZXkpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBwYXJhbSA9IHtcblx0ICAgICAgICBhcHA6IHBhcmFtcy5hcHAsXG5cdCAgICAgICAgcmVjb3JkOiBwYXJhbXMucmVjb3JkXG5cdCAgICB9O1xuXHQgICAgaWYgKHBhcmFtcy5yZXZpc2lvbikge1xuXHQgICAgICAgIHBhcmFtLnJldmlzaW9uID0gcGFyYW1zLnJldmlzaW9uO1xuXHQgICAgfVxuXHQgICAgaWYgKHBhcmFtcy5pZCkge1xuXHQgICAgICAgIHBhcmFtLmlkID0gcGFyYW1zLmlkO1xuXHQgICAgfSBlbHNlIGlmIChwYXJhbXMudXBkYXRlS2V5KSB7XG5cdCAgICAgICAgcGFyYW0udXBkYXRlS2V5ID0gcGFyYW1zLnVwZGF0ZUtleTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgaXNHdWVzdCA9IHBhcmFtcy5pc0d1ZXN0ID8gdHJ1ZSA6IGZhbHNlO1xuXHRcblx0ICAgIHJldHVybiAoMCwgX3NlbmRSZXF1ZXN0Mi5kZWZhdWx0KSgnL2svdjEvcmVjb3JkJywgJ1BVVCcsIHBhcmFtLCBpc0d1ZXN0KTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDE0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX2NyZWF0ZUVycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUVycm9yKTtcblx0XG5cdHZhciBfZXJyb3JNZXNzYWdlcyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgX2Vycm9yTWVzc2FnZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXJyb3JNZXNzYWdlcyk7XG5cdFxuXHR2YXIgX21ha2VCdWxrUGFyYW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0XG5cdHZhciBfbWFrZUJ1bGtQYXJhbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9tYWtlQnVsa1BhcmFtKTtcblx0XG5cdHZhciBfc2VuZFJlcXVlc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0dmFyIF9zZW5kUmVxdWVzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZW5kUmVxdWVzdCk7XG5cdFxuXHR2YXIgX2xpbWl0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0XG5cdHZhciBfbGltaXQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbGltaXQpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdC8qKiBGdW5jdGlvbjogcHV0UmVjb3Jkc1xyXG5cdCAqICAgQ2FuJ3QgdXBkYXRlIG92ZXIgMjAwMCByZWNvcmRzLlxyXG5cdCAqICAgSWYgcmVxdWVzdCBpcyBmYWlsZWQsIG5vIHJlY29yZCBpcyB1cGRhdGVkLlxyXG5cdCAqICBAcGFyYW0ge29iamVjdH0gcGFyYW1zXHJcblx0ICogIEBwYXJhbSB7bnVtYmVyfSBwYXJhbXMuYXBwXHJcblx0ICogIEBwYXJhbSB7YXJyYXl9IHBhcmFtcy5yZWNvcmRzXHJcblx0ICogIEBwYXJhbSB7Ym9vbGVhbn0gcGFyYW1zLmlzR3Vlc3RcclxuXHQgKlxyXG5cdCAqICBAcmV0dXJuIHtvYmplY3R9IHJlc3VsdFxyXG5cdCAqL1xuXHRleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAocGFyYW1zKSB7XG5cdCAgICAndXNlIHN0cmljdCc7XG5cdFxuXHQgICAgaWYgKCEocGFyYW1zICYmIHBhcmFtcy5hcHApKSB7XG5cdCAgICAgICAgcmV0dXJuICgwLCBfY3JlYXRlRXJyb3IyLmRlZmF1bHQpKF9lcnJvck1lc3NhZ2VzMi5kZWZhdWx0LnJlcXVpcmVkLmFwcCk7XG5cdCAgICB9IGVsc2UgaWYgKCFBcnJheS5pc0FycmF5KHBhcmFtcy5yZWNvcmRzKSkge1xuXHQgICAgICAgIHJldHVybiAoMCwgX2NyZWF0ZUVycm9yMi5kZWZhdWx0KShfZXJyb3JNZXNzYWdlczIuZGVmYXVsdC5zaG91bGRCZUFycmF5LnJlY29yZHMpO1xuXHQgICAgfSBlbHNlIGlmIChwYXJhbXMucmVjb3JkcyAmJiBwYXJhbXMucmVjb3Jkcy5sZW5ndGggPiBfbGltaXQyLmRlZmF1bHQuYnVsaykge1xuXHQgICAgICAgIHJldHVybiAoMCwgX2NyZWF0ZUVycm9yMi5kZWZhdWx0KShfZXJyb3JNZXNzYWdlczIuZGVmYXVsdC5vdmVyTGVuZ3RoLnJlY29yZHNMZXNzVGhhbjIwMDApO1xuXHQgICAgfSBlbHNlIGlmIChwYXJhbXMucmVjb3JkcyAmJiBwYXJhbXMucmVjb3Jkcy5sZW5ndGggPCAxKSB7XG5cdCAgICAgICAgcmV0dXJuICgwLCBfY3JlYXRlRXJyb3IyLmRlZmF1bHQpKF9lcnJvck1lc3NhZ2VzMi5kZWZhdWx0LmVtcHR5QXJyYXkucmVjb3Jkcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIHBhcmFtID0gKDAsIF9tYWtlQnVsa1BhcmFtMi5kZWZhdWx0KSh7XG5cdCAgICAgICAgYXBwOiBwYXJhbXMuYXBwLFxuXHQgICAgICAgIHJlY29yZHM6IHBhcmFtcy5yZWNvcmRzLFxuXHQgICAgICAgIG1ldGhvZDogJ1BVVCdcblx0ICAgIH0pO1xuXHQgICAgdmFyIGlzR3Vlc3QgPSBwYXJhbXMuaXNHdWVzdCA/IHRydWUgOiBmYWxzZTtcblx0XG5cdCAgICByZXR1cm4gKDAsIF9zZW5kUmVxdWVzdDIuZGVmYXVsdCkoJy9rL3YxL2J1bGtSZXF1ZXN0JywgJ1BPU1QnLCBwYXJhbSwgaXNHdWVzdCk7XG5cdH07XG5cbi8qKiovIH0sXG4vKiAxNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9jcmVhdGVFcnJvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVFcnJvcik7XG5cdFxuXHR2YXIgX2Vycm9yTWVzc2FnZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIF9lcnJvck1lc3NhZ2VzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Vycm9yTWVzc2FnZXMpO1xuXHRcblx0dmFyIF9wdXRSZWNvcmRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdFxuXHR2YXIgX3B1dFJlY29yZHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHV0UmVjb3Jkcyk7XG5cdFxuXHR2YXIgX3NsaWNlQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0XG5cdHZhciBfc2xpY2VBcnJheTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zbGljZUFycmF5KTtcblx0XG5cdHZhciBfbGltaXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHRcblx0dmFyIF9saW1pdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9saW1pdCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0LyoqIEZ1bmN0aW9uOiBwdXRBbGxSZWNvcmRzXHJcblx0ICogICBDYW4gdXBkYXRlIG92ZXIgMjAwMCByZWNvcmRzLCBidXQgY2FuJ3QgZG8gcm9sbGJhY2suXHJcblx0ICogIEBwYXJhbSB7b2JqZWN0fSBwYXJhbXNcclxuXHQgKiAgQHBhcmFtIHtudW1iZXJ9IHBhcmFtcy5hcHBcclxuXHQgKiAgQHBhcmFtIHthcnJheX0gcGFyYW1zLnJlY29yZHNcclxuXHQgKiAgQHBhcmFtIHtib29sZWFufSBwYXJhbXMuaXNHdWVzdFxyXG5cdCAqXHJcblx0ICogIEByZXR1cm4ge29iamVjdH0gcmVzdWx0XHJcblx0ICovXG5cdGV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcblx0ICAgICd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgICBpZiAoIShwYXJhbXMgJiYgcGFyYW1zLmFwcCkpIHtcblx0ICAgICAgICByZXR1cm4gKDAsIF9jcmVhdGVFcnJvcjIuZGVmYXVsdCkoX2Vycm9yTWVzc2FnZXMyLmRlZmF1bHQucmVxdWlyZWQuYXBwKTtcblx0ICAgIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkocGFyYW1zLnJlY29yZHMpKSB7XG5cdCAgICAgICAgcmV0dXJuICgwLCBfY3JlYXRlRXJyb3IyLmRlZmF1bHQpKF9lcnJvck1lc3NhZ2VzMi5kZWZhdWx0LnNob3VsZEJlQXJyYXkucmVjb3Jkcyk7XG5cdCAgICB9IGVsc2UgaWYgKHBhcmFtcy5yZWNvcmRzICYmIHBhcmFtcy5yZWNvcmRzLmxlbmd0aCA8IDEpIHtcblx0ICAgICAgICByZXR1cm4gKDAsIF9jcmVhdGVFcnJvcjIuZGVmYXVsdCkoX2Vycm9yTWVzc2FnZXMyLmRlZmF1bHQuZW1wdHlBcnJheS5yZWNvcmRzKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgcmVzdWx0cyA9IFtdO1xuXHRcblx0ICAgIHZhciBwdXRBbGwgPSBmdW5jdGlvbiBwdXRBbGwoYmVnaW4pIHtcblx0ICAgICAgICBiZWdpbiA9IGJlZ2luIHx8IDA7XG5cdCAgICAgICAgdmFyIGlzR3Vlc3QgPSBwYXJhbXMuaXNHdWVzdCA/IHRydWUgOiBmYWxzZTtcblx0ICAgICAgICB2YXIgcGFyYW0gPSB7XG5cdCAgICAgICAgICAgIGFwcDogcGFyYW1zLmFwcCxcblx0ICAgICAgICAgICAgcmVjb3JkczogKDAsIF9zbGljZUFycmF5Mi5kZWZhdWx0KShwYXJhbXMucmVjb3JkcywgYmVnaW4pLFxuXHQgICAgICAgICAgICBpc0d1ZXN0OiBpc0d1ZXN0XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgcmV0dXJuICgwLCBfcHV0UmVjb3JkczIuZGVmYXVsdCkocGFyYW0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdCAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmNvbmNhdChyZXNwb25zZS5yZXN1bHRzKTtcblx0ICAgICAgICAgICAgYmVnaW4gKz0gX2xpbWl0Mi5kZWZhdWx0LmJ1bGs7XG5cdCAgICAgICAgICAgIGlmIChwYXJhbXMucmVjb3Jkcy5sZW5ndGggPD0gYmVnaW4pIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmVzdWx0czogcmVzdWx0c1xuXHQgICAgICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICByZXR1cm4gcHV0QWxsKGJlZ2luKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIHB1dEFsbCgpO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfY3JlYXRlRXJyb3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlRXJyb3IpO1xuXHRcblx0dmFyIF9lcnJvck1lc3NhZ2VzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfZXJyb3JNZXNzYWdlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9lcnJvck1lc3NhZ2VzKTtcblx0XG5cdHZhciBfbWFrZUJ1bGtQYXJhbSA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0dmFyIF9tYWtlQnVsa1BhcmFtMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21ha2VCdWxrUGFyYW0pO1xuXHRcblx0dmFyIF9zZW5kUmVxdWVzdCA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHR2YXIgX3NlbmRSZXF1ZXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlbmRSZXF1ZXN0KTtcblx0XG5cdHZhciBfbGltaXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHRcblx0dmFyIF9saW1pdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9saW1pdCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0LyoqIEZ1bmN0aW9uOiBkZWxldGVSZWNvcmRzXHJcblx0ICogICBDYW4ndCBkZWxldGUgb3ZlciAyMDAwIHJlY29yZHMuXHJcblx0ICogICBJZiByZXF1ZXN0IGlzIGZhaWxlZCwgbm8gcmVjb3JkIGlzIGRlbGV0ZWQuXHJcblx0ICogIEBwYXJhbSB7b2JqZWN0fSBwYXJhbXNcclxuXHQgKiAgQHBhcmFtIHtudW1iZXJ9IHBhcmFtcy5hcHBcclxuXHQgKiAgQHBhcmFtIHthcnJheX0gcGFyYW1zLmlkc1xyXG5cdCAqICBAcGFyYW0ge2FycmF5fSBwYXJhbXMucmV2aXNpb25zXHJcblx0ICogIEBwYXJhbSB7Ym9vbGVhbn0gcGFyYW1zLmlzR3Vlc3RcclxuXHQgKlxyXG5cdCAqICBAcmV0dXJuIHtvYmplY3R9IHJlc3VsdFxyXG5cdCAqL1xuXHRleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAocGFyYW1zKSB7XG5cdCAgICAndXNlIHN0cmljdCc7XG5cdFxuXHQgICAgaWYgKCEocGFyYW1zICYmIHBhcmFtcy5hcHApKSB7XG5cdCAgICAgICAgcmV0dXJuICgwLCBfY3JlYXRlRXJyb3IyLmRlZmF1bHQpKF9lcnJvck1lc3NhZ2VzMi5kZWZhdWx0LnJlcXVpcmVkLmFwcCk7XG5cdCAgICB9IGVsc2UgaWYgKCFBcnJheS5pc0FycmF5KHBhcmFtcy5pZHMpKSB7XG5cdCAgICAgICAgcmV0dXJuICgwLCBfY3JlYXRlRXJyb3IyLmRlZmF1bHQpKF9lcnJvck1lc3NhZ2VzMi5kZWZhdWx0LnNob3VsZEJlQXJyYXkuaWRzKTtcblx0ICAgIH0gZWxzZSBpZiAocGFyYW1zLmlkcyAmJiBwYXJhbXMuaWRzLmxlbmd0aCA+IF9saW1pdDIuZGVmYXVsdC5idWxrKSB7XG5cdCAgICAgICAgcmV0dXJuICgwLCBfY3JlYXRlRXJyb3IyLmRlZmF1bHQpKF9lcnJvck1lc3NhZ2VzMi5kZWZhdWx0Lm92ZXJMZW5ndGguaWRzKTtcblx0ICAgIH0gZWxzZSBpZiAocGFyYW1zLmlkcyAmJiBwYXJhbXMuaWRzLmxlbmd0aCA8IDEpIHtcblx0ICAgICAgICByZXR1cm4gKDAsIF9jcmVhdGVFcnJvcjIuZGVmYXVsdCkoX2Vycm9yTWVzc2FnZXMyLmRlZmF1bHQuZW1wdHlBcnJheS5pZHMpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBwYXJhbSA9ICgwLCBfbWFrZUJ1bGtQYXJhbTIuZGVmYXVsdCkoe1xuXHQgICAgICAgIGFwcDogcGFyYW1zLmFwcCxcblx0ICAgICAgICBpZHM6IHBhcmFtcy5pZHMsXG5cdCAgICAgICAgbWV0aG9kOiAnREVMRVRFJ1xuXHQgICAgfSk7XG5cdCAgICBpZiAocGFyYW1zLnJldmlzaW9ucykge1xuXHQgICAgICAgIHBhcmFtLnJldmlzaW9ucyA9IHBhcmFtcy5yZXZpc2lvbnM7XG5cdCAgICB9XG5cdCAgICB2YXIgaXNHdWVzdCA9IHBhcmFtcy5pc0d1ZXN0ID8gdHJ1ZSA6IGZhbHNlO1xuXHRcblx0ICAgIHJldHVybiAoMCwgX3NlbmRSZXF1ZXN0Mi5kZWZhdWx0KSgnL2svdjEvYnVsa1JlcXVlc3QnLCAnUE9TVCcsIHBhcmFtLCBpc0d1ZXN0KTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDE3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX2NyZWF0ZUVycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUVycm9yKTtcblx0XG5cdHZhciBfZXJyb3JNZXNzYWdlcyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgX2Vycm9yTWVzc2FnZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXJyb3JNZXNzYWdlcyk7XG5cdFxuXHR2YXIgX2RlbGV0ZVJlY29yZHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0XG5cdHZhciBfZGVsZXRlUmVjb3JkczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZWxldGVSZWNvcmRzKTtcblx0XG5cdHZhciBfc2xpY2VBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHRcblx0dmFyIF9zbGljZUFycmF5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NsaWNlQXJyYXkpO1xuXHRcblx0dmFyIF9saW1pdCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdFxuXHR2YXIgX2xpbWl0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xpbWl0KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHQvKiogRnVuY3Rpb246IGRlbGV0ZUFsbFJlY29yZHNcclxuXHQgKiAgIENhbiBkZWxldGUgb3ZlciAyMDAwIHJlY29yZHMsIGJ1dCBjYW4ndCBkbyByb2xsYmFjay5cclxuXHQgKiAgQHBhcmFtIHtvYmplY3R9IHBhcmFtc1xyXG5cdCAqICBAcGFyYW0ge251bWJlcn0gcGFyYW1zLmFwcFxyXG5cdCAqICBAcGFyYW0ge2FycmF5fSBwYXJhbXMuaWRzXHJcblx0ICogIEBwYXJhbSB7Ym9vbGVhbn0gcGFyYW1zLmlzR3Vlc3RcclxuXHQgKlxyXG5cdCAqICBAcmV0dXJuIHtvYmplY3R9IHJlc3VsdFxyXG5cdCAqL1xuXHRleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAocGFyYW1zKSB7XG5cdCAgICAndXNlIHN0cmljdCc7XG5cdFxuXHQgICAgaWYgKCEocGFyYW1zICYmIHBhcmFtcy5hcHApKSB7XG5cdCAgICAgICAgcmV0dXJuICgwLCBfY3JlYXRlRXJyb3IyLmRlZmF1bHQpKF9lcnJvck1lc3NhZ2VzMi5kZWZhdWx0LnJlcXVpcmVkLmFwcCk7XG5cdCAgICB9IGVsc2UgaWYgKCFBcnJheS5pc0FycmF5KHBhcmFtcy5pZHMpKSB7XG5cdCAgICAgICAgcmV0dXJuICgwLCBfY3JlYXRlRXJyb3IyLmRlZmF1bHQpKF9lcnJvck1lc3NhZ2VzMi5kZWZhdWx0LnNob3VsZEJlQXJyYXkuaWRzKTtcblx0ICAgIH0gZWxzZSBpZiAocGFyYW1zLmlkcyAmJiBwYXJhbXMuaWRzLmxlbmd0aCA8IDEpIHtcblx0ICAgICAgICByZXR1cm4gKDAsIF9jcmVhdGVFcnJvcjIuZGVmYXVsdCkoX2Vycm9yTWVzc2FnZXMyLmRlZmF1bHQuZW1wdHlBcnJheS5pZHMpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciByZXN1bHRzID0gW107XG5cdFxuXHQgICAgdmFyIGRlbGV0ZUFsbCA9IGZ1bmN0aW9uIGRlbGV0ZUFsbChiZWdpbikge1xuXHQgICAgICAgIGJlZ2luID0gYmVnaW4gfHwgMDtcblx0ICAgICAgICB2YXIgaXNHdWVzdCA9IHBhcmFtcy5pc0d1ZXN0ID8gdHJ1ZSA6IGZhbHNlO1xuXHQgICAgICAgIHZhciBwYXJhbSA9IHtcblx0ICAgICAgICAgICAgYXBwOiBwYXJhbXMuYXBwLFxuXHQgICAgICAgICAgICBpZHM6ICgwLCBfc2xpY2VBcnJheTIuZGVmYXVsdCkocGFyYW1zLmlkcywgYmVnaW4pLFxuXHQgICAgICAgICAgICBpc0d1ZXN0OiBpc0d1ZXN0XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgcmV0dXJuICgwLCBfZGVsZXRlUmVjb3JkczIuZGVmYXVsdCkocGFyYW0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdCAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmNvbmNhdChyZXNwb25zZS5yZXN1bHRzKTtcblx0ICAgICAgICAgICAgYmVnaW4gKz0gX2xpbWl0Mi5kZWZhdWx0LmJ1bGs7XG5cdCAgICAgICAgICAgIGlmIChwYXJhbXMuaWRzLmxlbmd0aCA8PSBiZWdpbikge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXN1bHRzOiByZXN1bHRzXG5cdCAgICAgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHJldHVybiBkZWxldGVBbGwoYmVnaW4pO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gZGVsZXRlQWxsKCk7XG5cdH07XG5cbi8qKiovIH0sXG4vKiAxOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfZ2V0QWxsUmVjb3Jkc0J5UXVlcnkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9nZXRBbGxSZWNvcmRzQnlRdWVyeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRBbGxSZWNvcmRzQnlRdWVyeSk7XG5cdFxuXHR2YXIgX2RlbGV0ZUFsbFJlY29yZHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblx0XG5cdHZhciBfZGVsZXRlQWxsUmVjb3JkczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZWxldGVBbGxSZWNvcmRzKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHQvKiogRnVuY3Rpb246IGRlbGV0ZUFsbFJlY29yZHNCeVF1ZXJ5XHJcblx0ICogICBDYW4gZGVsZXRlIG92ZXIgMjAwMCByZWNvcmRzLCBidXQgY2FuJ3QgZG8gcm9sbGJhY2suXHJcblx0ICogIEBwYXJhbSB7b2JqZWN0fSBwYXJhbXNcclxuXHQgKiAgQHBhcmFtIHtudW1iZXJ9IHBhcmFtcy5hcHBcclxuXHQgKiAgQHBhcmFtIHtzdHJpbmd9IHBhcmFtcy5xdWVyeVxyXG5cdCAqICBAcGFyYW0ge2Jvb2xlYW59IHBhcmFtcy5pc0d1ZXN0XHJcblx0ICpcclxuXHQgKiAgQHJldHVybiB7b2JqZWN0fSByZXN1bHRcclxuXHQgKi9cblx0ZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKHBhcmFtcykge1xuXHQgICAgJ3VzZSBzdHJpY3QnO1xuXHRcblx0ICAgIHBhcmFtcy5maWVsZHMgPSBbJyRpZCddO1xuXHQgICAgcmV0dXJuICgwLCBfZ2V0QWxsUmVjb3Jkc0J5UXVlcnkyLmRlZmF1bHQpKHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzcCkge1xuXHQgICAgICAgIHZhciBpZHMgPSBbXTtcblx0ICAgICAgICB2YXIgcmVjb3JkcyA9IHJlc3AucmVjb3Jkcztcblx0ICAgICAgICBpZiAoIXJlY29yZHMgfHwgIXJlY29yZHMubGVuZ3RoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB7fTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWNvcmRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGlkcy5wdXNoKHJlY29yZHNbaV0uJGlkLnZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHBhcmFtID0ge1xuXHQgICAgICAgICAgICBhcHA6IHBhcmFtcy5hcHAsXG5cdCAgICAgICAgICAgIGlkczogaWRzLFxuXHQgICAgICAgICAgICBpc0d1ZXN0OiBwYXJhbXMuaXNHdWVzdFxuXHQgICAgICAgIH07XG5cdCAgICAgICAgcmV0dXJuICgwLCBfZGVsZXRlQWxsUmVjb3JkczIuZGVmYXVsdCkocGFyYW0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcblx0ICAgICAgICB9KTtcblx0ICAgIH0pO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfY3JlYXRlRXJyb3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlRXJyb3IpO1xuXHRcblx0dmFyIF9lcnJvck1lc3NhZ2VzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfZXJyb3JNZXNzYWdlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9lcnJvck1lc3NhZ2VzKTtcblx0XG5cdHZhciBfZ2V0UmVjb3JkcyA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdFxuXHR2YXIgX2dldFJlY29yZHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UmVjb3Jkcyk7XG5cdFxuXHR2YXIgX3Bvc3RSZWNvcmQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHRcblx0dmFyIF9wb3N0UmVjb3JkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3RSZWNvcmQpO1xuXHRcblx0dmFyIF9wdXRSZWNvcmQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0XG5cdHZhciBfcHV0UmVjb3JkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3B1dFJlY29yZCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0LyoqIEZ1bmN0aW9uOiB1cHNlcnRSZWNvcmRcclxuXHQgKiAgQHBhcmFtIHtvYmplY3R9IHBhcmFtc1xyXG5cdCAqICBAcGFyYW0ge251bWJlcn0gcGFyYW1zLmFwcFxyXG5cdCAqICBAcGFyYW0ge29iamVjdH0gcGFyYW1zLnVwZGF0ZUtleVxyXG5cdCAqICBAcGFyYW0ge3N0cmluZ30gcGFyYW1zLnVwZGF0ZUtleS5maWVsZFxyXG5cdCAqICBAcGFyYW0ge3N0cmluZ30gcGFyYW1zLnVwZGF0ZUtleS52YWx1ZVxyXG5cdCAqICBAcGFyYW0ge29iamVjdH0gcGFyYW1zLnJlY29yZFxyXG5cdCAqICBAcGFyYW0ge2Jvb2xlYW59IHBhcmFtcy5pc0d1ZXN0XHJcblx0ICpcclxuXHQgKiAgQHJldHVybiB7b2JqZWN0fSByZXN1bHRcclxuXHQgKi9cblx0ZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKHBhcmFtcykge1xuXHQgICAgJ3VzZSBzdGlpcmljdCc7XG5cdFxuXHQgICAgaWYgKCEocGFyYW1zICYmIHBhcmFtcy5hcHApKSB7XG5cdCAgICAgICAgcmV0dXJuICgwLCBfY3JlYXRlRXJyb3IyLmRlZmF1bHQpKF9lcnJvck1lc3NhZ2VzMi5kZWZhdWx0LnJlcXVpcmVkLmFwcCk7XG5cdCAgICB9IGVsc2UgaWYgKCFwYXJhbXMudXBkYXRlS2V5IHx8ICFwYXJhbXMudXBkYXRlS2V5LmZpZWxkIHx8ICFwYXJhbXMudXBkYXRlS2V5LnZhbHVlICYmIHBhcmFtcy51cGRhdGVLZXkudmFsdWUgIT09ICcnKSB7XG5cdCAgICAgICAgcmV0dXJuICgwLCBfY3JlYXRlRXJyb3IyLmRlZmF1bHQpKF9lcnJvck1lc3NhZ2VzMi5kZWZhdWx0LnJlcXVpcmVkLnVwZGF0ZUtleSk7XG5cdCAgICB9XG5cdFxuXHQgICAgcGFyYW1zLnF1ZXJ5ID0gcGFyYW1zLnVwZGF0ZUtleS5maWVsZCArICcgPSBcIicgKyBwYXJhbXMudXBkYXRlS2V5LnZhbHVlICsgJ1wiJztcblx0ICAgIHJldHVybiAoMCwgX2dldFJlY29yZHMyLmRlZmF1bHQpKHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzcCkge1xuXHQgICAgICAgIGlmIChwYXJhbXMudXBkYXRlS2V5LnZhbHVlID09PSAnJyB8fCByZXNwLnJlY29yZHMubGVuZ3RoIDwgMSkge1xuXHQgICAgICAgICAgICAvL3Bvc3Rcblx0ICAgICAgICAgICAgcGFyYW1zLnJlY29yZFtwYXJhbXMudXBkYXRlS2V5LmZpZWxkXSA9IHtcblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBwYXJhbXMudXBkYXRlS2V5LnZhbHVlXG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIHJldHVybiAoMCwgX3Bvc3RSZWNvcmQyLmRlZmF1bHQpKHBhcmFtcyk7XG5cdCAgICAgICAgfSBlbHNlIGlmIChyZXNwLnJlY29yZHMubGVuZ3RoID09PSAxKSB7XG5cdCAgICAgICAgICAgIC8vcHV0XG5cdCAgICAgICAgICAgIHJldHVybiAoMCwgX3B1dFJlY29yZDIuZGVmYXVsdCkocGFyYW1zKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAvL25vdCB1bmlxdWVcblx0ICAgICAgICAgICAgcmV0dXJuICgwLCBfY3JlYXRlRXJyb3IyLmRlZmF1bHQpKF9lcnJvck1lc3NhZ2VzMi5kZWZhdWx0Lm5vdFVuaXF1ZUZpZWxkKTtcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDIwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX2NyZWF0ZUVycm9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUVycm9yKTtcblx0XG5cdHZhciBfZXJyb3JNZXNzYWdlcyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgX2Vycm9yTWVzc2FnZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXJyb3JNZXNzYWdlcyk7XG5cdFxuXHR2YXIgX21ha2VCdWxrUGFyYW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0XG5cdHZhciBfbWFrZUJ1bGtQYXJhbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9tYWtlQnVsa1BhcmFtKTtcblx0XG5cdHZhciBfZ2V0QWxsUmVjb3Jkc0J5UXVlcnkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9nZXRBbGxSZWNvcmRzQnlRdWVyeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRBbGxSZWNvcmRzQnlRdWVyeSk7XG5cdFxuXHR2YXIgX3Bvc3RBbGxSZWNvcmRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHR2YXIgX3Bvc3RBbGxSZWNvcmRzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3RBbGxSZWNvcmRzKTtcblx0XG5cdHZhciBfcHV0QWxsUmVjb3JkcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHRcblx0dmFyIF9wdXRBbGxSZWNvcmRzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3B1dEFsbFJlY29yZHMpO1xuXHRcblx0dmFyIF9zZW5kUmVxdWVzdCA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHR2YXIgX3NlbmRSZXF1ZXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlbmRSZXF1ZXN0KTtcblx0XG5cdHZhciBfbGltaXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHRcblx0dmFyIF9saW1pdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9saW1pdCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0LyoqIEZ1bmN0aW9uOiB1cHNlcnRSZWNvcmRzXHJcblx0ICogIENhbid0IHVwc2VydCBvdmVyIDE1MDAgcmVjb3Jkcy5cclxuXHQgKiAgIElmIHJlcXVlc3QgaXMgZmFpbGVkLCBubyByZWNvcmQgaXMgaW5zZXJ0ZWQgYW5kIHVwZGF0ZWQuXHJcblx0ICogIEBwYXJhbSB7b2JqZWN0fSBwYXJhbXNcclxuXHQgKiAgQHBhcmFtIHtudW1iZXJ9IHBhcmFtcy5hcHBcclxuXHQgKiAgQHBhcmFtIHthcnJheX0gcGFyYW1zLnJlY29yZHNcclxuXHQgKiAgQHBhcmFtIHtib29sZWFufSBwYXJhbXMuaXNHdWVzdFxyXG5cdCAqXHJcblx0ICogIEByZXR1cm4ge29iamVjdH0gcmVzdWx0XHJcblx0ICovXG5cdGV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcblx0ICAgICd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgICBpZiAoIShwYXJhbXMgJiYgcGFyYW1zLmFwcCkpIHtcblx0ICAgICAgICByZXR1cm4gKDAsIF9jcmVhdGVFcnJvcjIuZGVmYXVsdCkoX2Vycm9yTWVzc2FnZXMyLmRlZmF1bHQucmVxdWlyZWQuYXBwKTtcblx0ICAgIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkocGFyYW1zLnJlY29yZHMpKSB7XG5cdCAgICAgICAgcmV0dXJuICgwLCBfY3JlYXRlRXJyb3IyLmRlZmF1bHQpKF9lcnJvck1lc3NhZ2VzMi5kZWZhdWx0LnNob3VsZEJlQXJyYXkucmVjb3Jkcyk7XG5cdCAgICB9IGVsc2UgaWYgKHBhcmFtcy5yZWNvcmRzICYmIHBhcmFtcy5yZWNvcmRzLmxlbmd0aCA+IF9saW1pdDIuZGVmYXVsdC51cHNlcnRSZWNvcmRzKSB7XG5cdCAgICAgICAgcmV0dXJuICgwLCBfY3JlYXRlRXJyb3IyLmRlZmF1bHQpKF9lcnJvck1lc3NhZ2VzMi5kZWZhdWx0Lm92ZXJMZW5ndGgucmVjb3Jkc0xlc3NUaGFuMTUwMCk7XG5cdCAgICB9IGVsc2UgaWYgKHBhcmFtcy5yZWNvcmRzICYmIHBhcmFtcy5yZWNvcmRzLmxlbmd0aCA8IDEpIHtcblx0ICAgICAgICByZXR1cm4gKDAsIF9jcmVhdGVFcnJvcjIuZGVmYXVsdCkoX2Vycm9yTWVzc2FnZXMyLmRlZmF1bHQuZW1wdHlBcnJheS5yZWNvcmRzKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgZG9lc0V4aXN0U2FtZUZpZWxkVmFsdWUgPSBmdW5jdGlvbiBkb2VzRXhpc3RTYW1lRmllbGRWYWx1ZShhbGxSZWNvcmRzLCBjb21wYXJlZFJlY29yZCkge1xuXHQgICAgICAgIGlmIChjb21wYXJlZFJlY29yZC51cGRhdGVLZXkudmFsdWUgPT09ICcnKSB7XG5cdCAgICAgICAgICAgIC8vdXBkYXRlS2V5LnZhbHVlIGlzICcnID0+IHBvc3Rcblx0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFsbFJlY29yZHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgaWYgKGFsbFJlY29yZHNbaV1bY29tcGFyZWRSZWNvcmQudXBkYXRlS2V5LmZpZWxkXS52YWx1ZSA9PT0gY29tcGFyZWRSZWNvcmQudXBkYXRlS2V5LnZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAvL2V4aXN0ID0+IHB1dFxuXHQgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgLy9kb2Vzbid0IGV4aXN0ID0+IHBvc3Rcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9O1xuXHRcblx0ICAgIHZhciBzZW5kVXBzZXJ0QnVsa1JlcXVlc3QgPSBmdW5jdGlvbiBzZW5kVXBzZXJ0QnVsa1JlcXVlc3QocG9zdFJlY29yZHMsIHB1dFJlY29yZHMpIHtcblx0ICAgICAgICB2YXIgcG9zdEJ1bGtQYXJhbSA9ICgwLCBfbWFrZUJ1bGtQYXJhbTIuZGVmYXVsdCkoe1xuXHQgICAgICAgICAgICBhcHA6IHBhcmFtcy5hcHAsXG5cdCAgICAgICAgICAgIHJlY29yZHM6IHBvc3RSZWNvcmRzLFxuXHQgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJ1xuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHZhciBwdXRCdWxrUGFyYW0gPSAoMCwgX21ha2VCdWxrUGFyYW0yLmRlZmF1bHQpKHtcblx0ICAgICAgICAgICAgYXBwOiBwYXJhbXMuYXBwLFxuXHQgICAgICAgICAgICByZWNvcmRzOiBwdXRSZWNvcmRzLFxuXHQgICAgICAgICAgICBtZXRob2Q6ICdQVVQnXG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgdmFyIHBhcmFtID0ge1xuXHQgICAgICAgICAgICByZXF1ZXN0czogcG9zdEJ1bGtQYXJhbS5yZXF1ZXN0cy5jb25jYXQocHV0QnVsa1BhcmFtLnJlcXVlc3RzKVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgdmFyIGlzR3Vlc3QgPSBwYXJhbXMuaXNHdWVzdCA/IHRydWUgOiBmYWxzZTtcblx0XG5cdCAgICAgICAgcmV0dXJuICgwLCBfc2VuZFJlcXVlc3QyLmRlZmF1bHQpKCcvay92MS9idWxrUmVxdWVzdCcsICdQT1NUJywgcGFyYW0sIGlzR3Vlc3QpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gKDAsIF9nZXRBbGxSZWNvcmRzQnlRdWVyeTIuZGVmYXVsdCkocGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7XG5cdCAgICAgICAgdmFyIGFsbFJlY29yZHMgPSByZXNwLnJlY29yZHM7XG5cdCAgICAgICAgdmFyIHJlY29yZHMgPSBwYXJhbXMucmVjb3Jkcztcblx0ICAgICAgICB2YXIgcHV0UmVjb3JkcyA9IFtdO1xuXHQgICAgICAgIHZhciBwb3N0UmVjb3JkcyA9IFtdO1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVjb3Jkcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBpZiAoZG9lc0V4aXN0U2FtZUZpZWxkVmFsdWUoYWxsUmVjb3JkcywgcmVjb3Jkc1tpXSkpIHtcblx0ICAgICAgICAgICAgICAgIHB1dFJlY29yZHMucHVzaChyZWNvcmRzW2ldKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHZhciByZWNvcmQgPSByZWNvcmRzW2ldLnJlY29yZDtcblx0ICAgICAgICAgICAgICAgIHJlY29yZFtyZWNvcmRzW2ldLnVwZGF0ZUtleS5maWVsZF0gPSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJlY29yZHNbaV0udXBkYXRlS2V5LnZhbHVlXG5cdCAgICAgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICAgICAgcG9zdFJlY29yZHMucHVzaChyZWNvcmQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gc2VuZFVwc2VydEJ1bGtSZXF1ZXN0KHBvc3RSZWNvcmRzLCBwdXRSZWNvcmRzKTtcblx0ICAgIH0pO1xuXHR9O1xuXG4vKioqLyB9XG4vKioqKioqLyBdKTtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBraW50b25lVXRpbGl0eS5taW4uanNcbiAqKi8iLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHdlYnBhY2svYm9vdHN0cmFwIGI5NDcwMzI0MzAwODRjYzNhOTE2XG4gKiovIiwiJ3VzZSBzdHJpY3QnXG5cbmltcG9ydCBnZXRSZWNvcmQgZnJvbSAnLi9yZXN0L2dldFJlY29yZCdcbmltcG9ydCBnZXRSZWNvcmRzIGZyb20gJy4vcmVzdC9nZXRSZWNvcmRzJ1xuaW1wb3J0IGdldEFsbFJlY29yZHNCeVF1ZXJ5IGZyb20gJy4vcmVzdC9nZXRBbGxSZWNvcmRzQnlRdWVyeSdcbmltcG9ydCBwb3N0UmVjb3JkIGZyb20gJy4vcmVzdC9wb3N0UmVjb3JkJ1xuaW1wb3J0IHBvc3RSZWNvcmRzIGZyb20gJy4vcmVzdC9wb3N0UmVjb3JkcydcbmltcG9ydCBwb3N0QWxsUmVjb3JkcyBmcm9tICcuL3Jlc3QvcG9zdEFsbFJlY29yZHMnXG5pbXBvcnQgcHV0UmVjb3JkIGZyb20gJy4vcmVzdC9wdXRSZWNvcmQnXG5pbXBvcnQgcHV0UmVjb3JkcyBmcm9tICcuL3Jlc3QvcHV0UmVjb3JkcydcbmltcG9ydCBwdXRBbGxSZWNvcmRzIGZyb20gJy4vcmVzdC9wdXRBbGxSZWNvcmRzJ1xuaW1wb3J0IGRlbGV0ZVJlY29yZHMgZnJvbSAnLi9yZXN0L2RlbGV0ZVJlY29yZHMnXG5pbXBvcnQgZGVsZXRlQWxsUmVjb3JkcyBmcm9tICcuL3Jlc3QvZGVsZXRlQWxsUmVjb3JkcydcbmltcG9ydCBkZWxldGVBbGxSZWNvcmRzQnlRdWVyeSBmcm9tICcuL3Jlc3QvZGVsZXRlQWxsUmVjb3Jkc0J5UXVlcnknXG5pbXBvcnQgdXBzZXJ0UmVjb3JkIGZyb20gJy4vcmVzdC91cHNlcnRSZWNvcmQnXG5pbXBvcnQgdXBzZXJ0UmVjb3JkcyBmcm9tICcuL3Jlc3QvdXBzZXJ0UmVjb3JkcydcblxubGV0IGtpbnRvbmVVdGlsaXR5ID0ge1xuICAgIHJlc3Q6IHt9LFxuICAgIHVpOiB7fVxufVxua2ludG9uZVV0aWxpdHkucmVzdC5nZXRSZWNvcmQgPSBnZXRSZWNvcmRcbmtpbnRvbmVVdGlsaXR5LnJlc3QuZ2V0UmVjb3JkcyA9IGdldFJlY29yZHNcbmtpbnRvbmVVdGlsaXR5LnJlc3QuZ2V0QWxsUmVjb3Jkc0J5UXVlcnkgPSBnZXRBbGxSZWNvcmRzQnlRdWVyeVxua2ludG9uZVV0aWxpdHkucmVzdC5wb3N0UmVjb3JkID0gcG9zdFJlY29yZFxua2ludG9uZVV0aWxpdHkucmVzdC5wb3N0UmVjb3JkcyA9IHBvc3RSZWNvcmRzXG5raW50b25lVXRpbGl0eS5yZXN0LnBvc3RBbGxSZWNvcmRzID0gcG9zdEFsbFJlY29yZHNcbmtpbnRvbmVVdGlsaXR5LnJlc3QucHV0UmVjb3JkID0gcHV0UmVjb3JkXG5raW50b25lVXRpbGl0eS5yZXN0LnB1dFJlY29yZHMgPSBwdXRSZWNvcmRzXG5raW50b25lVXRpbGl0eS5yZXN0LnB1dEFsbFJlY29yZHMgPSBwdXRBbGxSZWNvcmRzXG5raW50b25lVXRpbGl0eS5yZXN0LmRlbGV0ZVJlY29yZHMgPSBkZWxldGVSZWNvcmRzXG5raW50b25lVXRpbGl0eS5yZXN0LmRlbGV0ZUFsbFJlY29yZHMgPSBkZWxldGVBbGxSZWNvcmRzXG5raW50b25lVXRpbGl0eS5yZXN0LmRlbGV0ZUFsbFJlY29yZHNCeVF1ZXJ5ID0gZGVsZXRlQWxsUmVjb3Jkc0J5UXVlcnlcbmtpbnRvbmVVdGlsaXR5LnJlc3QudXBzZXJ0UmVjb3JkID0gdXBzZXJ0UmVjb3JkXG5raW50b25lVXRpbGl0eS5yZXN0LnVwc2VydFJlY29yZHMgPSB1cHNlcnRSZWNvcmRzXG5cbndpbmRvdy5raW50b25lVXRpbGl0eSA9IGtpbnRvbmVVdGlsaXR5XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9qcy9tYWluLmpzXG4gKiovIiwiaW1wb3J0IGNyZWF0ZUVycm9yIGZyb20gJy4vY29tbW9uL2NyZWF0ZUVycm9yJ1xyXG5pbXBvcnQgZXJyb3JzIGZyb20gJyFqc29uIS4vcmVzb3VyY2UvZXJyb3JNZXNzYWdlcy5qc29uJ1xyXG5pbXBvcnQgc2VuZFJlcXVlc3QgZnJvbSAnLi9jb21tb24vc2VuZFJlcXVlc3QnXHJcblxyXG4vKiogRnVuY3Rpb246IGdldFJlY29yZFxyXG4gKiAgQHBhcmFtIHtvYmplY3R9IHBhcmFtc1xyXG4gKiAgQHBhcmFtIHtudW1iZXJ9IHBhcmFtcy5hcHBcclxuICogIEBwYXJhbSB7bnVtYmVyfSBwYXJhbXMuaWRcclxuICogIEBwYXJhbSB7Ym9vbGVhbn0gcGFyYW1zLmlzR3Vlc3RcclxuICpcclxuICogIEByZXR1cm4ge29iamVjdH0gcmVzdWx0XHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCAocGFyYW1zKSA9PiB7XHJcbiAgICAndXNlIHN0cmljdCdcclxuICAgIGlmICghKHBhcmFtcyAmJiBwYXJhbXMuYXBwKSkge1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVFcnJvcihlcnJvcnMucmVxdWlyZWQuYXBwKVxyXG4gICAgfSBlbHNlIGlmICghKHBhcmFtcyAmJiBwYXJhbXMuaWQpKSB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVycm9yKGVycm9ycy5yZXF1aXJlZC5pZClcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcGFyYW0gPSB7XHJcbiAgICAgICAgYXBwOiBwYXJhbXMuYXBwLFxyXG4gICAgICAgIGlkOiBwYXJhbXMuaWRcclxuICAgIH1cclxuICAgIGxldCBpc0d1ZXN0ID0gKHBhcmFtcy5pc0d1ZXN0KSA/IHRydWUgOiBmYWxzZVxyXG5cclxuICAgIHJldHVybiBzZW5kUmVxdWVzdCgnL2svdjEvcmVjb3JkJywgJ0dFVCcsIHBhcmFtLCBpc0d1ZXN0KVxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2pzL3Jlc3QvZ2V0UmVjb3JkLmpzXG4gKiovIiwiLyoqIEZ1bmN0aW9uOiBjcmVhdGVFcnJvclxyXG4gKiAgQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2VcclxuICpcclxuICogIEByZXR1cm4ge29iamVjdH0gcHJvbWlzZVxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgKG1lc3NhZ2UpID0+IHtcclxuICAgIHJldHVybiBuZXcga2ludG9uZS5Qcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICByZWplY3Qoe1xyXG4gICAgICAgICAgICBzdGF0dXM6ICdlcnJvcicsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9qcy9yZXN0L2NvbW1vbi9jcmVhdGVFcnJvci5qc1xuICoqLyIsIm1vZHVsZS5leHBvcnRzID0ge1xuXHRcInJlcXVpcmVkXCI6IHtcblx0XHRcImFwcFwiOiBcIlxcXCJwYXJhbXNcXFwiIG5lZWRzIFxcXCJhcHBcXFwiLlwiLFxuXHRcdFwiaWRcIjogXCJcXFwicGFyYW1zXFxcIiBuZWVkcyBcXFwiaWRcXFwiLlwiLFxuXHRcdFwiaWRPclVwZGF0ZUtleVwiOiBcIlxcXCJwYXJhbXNcXFwiIG5lZWRzIFxcXCJpZFxcXCIgb3IgXFxcInVwZGF0ZUtleVxcXCIuXCIsXG5cdFx0XCJ1cGRhdGVLZXlcIjogXCJcXFwicGFyYW1zXFxcIiBuZWVkcyBcXFwidXBkYXRlS2V5XFxcIiwgXFxcInVwZGF0ZUtleS5maWVsZFxcXCIgYW5kIFxcXCJ1cGRhdGVLZXkudmFsdWVcXFwiLlwiXG5cdH0sXG5cdFwic2hvdWxkQmVBcnJheVwiOiB7XG5cdFx0XCJyZWNvcmRzXCI6IFwiXFxcInJlY29yZHNcXFwiIHNob3VsZCBiZSBBcnJheS5cIixcblx0XHRcImlkc1wiOiBcIlxcXCJpZHNcXFwiIHNob3VsZCBiZSBBcnJheS5cIlxuXHR9LFxuXHRcIm92ZXJMZW5ndGhcIjoge1xuXHRcdFwicmVjb3Jkc0xlc3NUaGFuMjAwMFwiOiBcIlxcXCJyZWNvcmRzXFxcIiBzaG91bGQgYmUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIDIsMDAwLlwiLFxuXHRcdFwicmVjb3Jkc0xlc3NUaGFuMTUwMFwiOiBcIlxcXCJyZWNvcmRzXFxcIiBzaG91bGQgYmUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIDEsNTAwLlwiLFxuXHRcdFwiaWRzXCI6IFwiXFxcImlkcy5sZW5ndGhcXFwiIHNob3VsZCBiZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gMiwwMDAuXCJcblx0fSxcblx0XCJlbXB0eUFycmF5XCI6IHtcblx0XHRcInJlY29yZHNcIjogXCJcXFwicmVjb3Jkc1xcXCIgaXMgZW1wdHkuIFxcXCJyZWNvcmRzXFxcIiBuZWVkcyB0byBjb250YWluIG9uZSByZWNvcmQgYXQgbGVhc3QuXCIsXG5cdFx0XCJpZHNcIjogXCJcXFwiaWRzXFxcIiBpcyBlbXB0eS4gXFxcImlkc1xcXCIgbmVlZHMgdG8gY29udGFpbiBvbmUgaWQgYXQgbGVhc3QuXCJcblx0fSxcblx0XCJub3RVbmlxdWVGaWVsZFwiOiBcIlxcXCJwYXJhbXMudXBkYXRlS2V5XFxcIiBpcyBub3QgdW5pcXVlIGZpZWxkLlwiXG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2pzb24tbG9hZGVyIS4vc3JjL2pzL3Jlc3QvcmVzb3VyY2UvZXJyb3JNZXNzYWdlcy5qc29uXG4gKiogbW9kdWxlIGlkID0gM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqIEZ1bmN0aW9uOiBzZW5kQnVsa1JlcXVlc3RcclxuICogIEBwYXJhbSB7c3RyaW5nfSBhcGlcclxuICogIEBwYXJhbSB7c3RyaW5nfSBtZXRob2RcclxuICogIEBwYXJhbSB7b2JqZWN0fSBwYXJhbVxyXG4gKiAgQHBhcmFtIHtib29sZWFufSBpc0d1ZXN0XHJcbiAqIFxyXG4gKiAgQHJldHVybiAge29iamVjdH0gcmVzdWx0XHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCAoYXBpLCBtZXRob2QsIHBhcmFtLCBpc0d1ZXN0KSA9PiB7XHJcbiAgICByZXR1cm4ga2ludG9uZS5hcGkoa2ludG9uZS5hcGkudXJsKGFwaSwgaXNHdWVzdCksIG1ldGhvZCwgcGFyYW0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlXHJcbiAgICB9KVxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2pzL3Jlc3QvY29tbW9uL3NlbmRSZXF1ZXN0LmpzXG4gKiovIiwiaW1wb3J0IGNyZWF0ZUVycm9yIGZyb20gJy4vY29tbW9uL2NyZWF0ZUVycm9yJ1xyXG5pbXBvcnQgZXJyb3JzIGZyb20gJyFqc29uIS4vcmVzb3VyY2UvZXJyb3JNZXNzYWdlcy5qc29uJ1xyXG5pbXBvcnQgc2VuZFJlcXVlc3QgZnJvbSAnLi9jb21tb24vc2VuZFJlcXVlc3QnXHJcblxyXG4vKiogRnVuY3Rpb246IGdldFJlY29yZHNcclxuICogIEBwYXJhbSB7b2JqZWN0fSBwYXJhbXNcclxuICogIEBwYXJhbSB7bnVtYmVyfSBwYXJhbXMuYXBwXHJcbiAqICBAcGFyYW0ge3N0cmluZ30gcGFyYW1zLnF1ZXJ5XHJcbiAqICBAcGFyYW0ge2FycmF5fSBwYXJhbXMuZmllbGRzXHJcbiAqICBAcGFyYW0ge2Jvb2xlYW59IHBhcmFtcy50b3RhbENvdW50XHJcbiAqICBAcGFyYW0ge2Jvb2xlYW59IHBhcmFtcy5pc0d1ZXN0XHJcbiAqXHJcbiAqICBAcmV0dXJuIHtvYmplY3R9IHJlc3VsdFxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgKHBhcmFtcykgPT4ge1xyXG4gICAgJ3VzZSBzdHJpY3QnXHJcbiAgICBpZiAoIShwYXJhbXMgJiYgcGFyYW1zLmFwcCkpIHtcclxuICAgICAgICByZXR1cm4gY3JlYXRlRXJyb3IoZXJyb3JzLnJlcXVpcmVkLmFwcClcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcGFyYW0gPSB7XHJcbiAgICAgICAgYXBwOiBwYXJhbXMuYXBwLFxyXG4gICAgICAgIHF1ZXJ5OiBwYXJhbXMucXVlcnkgfHwgJycsXHJcbiAgICAgICAgZmllbGRzOiBwYXJhbXMuZmllbGRzIHx8IFtdLFxyXG4gICAgICAgIHRvdGFsQ291bnQ6IHBhcmFtcy50b3RhbENvdW50IHx8IGZhbHNlXHJcbiAgICB9XHJcbiAgICBsZXQgaXNHdWVzdCA9IChwYXJhbXMuaXNHdWVzdCkgPyB0cnVlIDogZmFsc2VcclxuXHJcbiAgICByZXR1cm4gc2VuZFJlcXVlc3QoJy9rL3YxL3JlY29yZHMnLCAnR0VUJywgcGFyYW0sIGlzR3Vlc3QpXHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvanMvcmVzdC9nZXRSZWNvcmRzLmpzXG4gKiovIiwiaW1wb3J0IGNyZWF0ZUVycm9yIGZyb20gJy4vY29tbW9uL2NyZWF0ZUVycm9yJ1xyXG5pbXBvcnQgZXJyb3JzIGZyb20gJyFqc29uIS4vcmVzb3VyY2UvZXJyb3JNZXNzYWdlcy5qc29uJ1xyXG5pbXBvcnQgc2VuZFJlcXVlc3QgZnJvbSAnLi9jb21tb24vc2VuZFJlcXVlc3QnXHJcbmltcG9ydCBsaW1pdCBmcm9tICchanNvbiEuL3Jlc291cmNlL2xpbWl0Lmpzb24nXHJcblxyXG4vKiogRnVuY3Rpb246IGdldEFsbFJlY29yZHNCeVF1ZXJ5XHJcbiAqICBAcGFyYW0ge29iamVjdH0gcGFyYW1zXHJcbiAqICBAcGFyYW0ge251bWJlcn0gcGFyYW1zLmFwcFxyXG4gKiAgQHBhcmFtIHtzdHJpbmd9IHBhcmFtcy5xdWVyeVxyXG4gKiAgQHBhcmFtIHthcnJheX0gcGFyYW1zLmZpZWxkc1xyXG4gKiAgQHBhcmFtIHtib29sZWFufSBwYXJhbXMuaXNHdWVzdFxyXG4gKlxyXG4gKiAgQHJldHVybiB7b2JqZWN0fSByZXN1bHRcclxuICovXHJcbmxldCBnZXRBbGxSZWNvcmRzQnlRdWVyeSA9IChwYXJhbXMsIHJlY29yZHMsIG9mZnNldCkgPT4ge1xyXG4gICAgJ3VzZSBzdHJpY3QnXHJcbiAgICBpZiAoIShwYXJhbXMgJiYgcGFyYW1zLmFwcCkpIHtcclxuICAgICAgICByZXR1cm4gY3JlYXRlRXJyb3IoZXJyb3JzLnJlcXVpcmVkLmFwcClcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgTElNSVQgPSBsaW1pdC5nZXRSZWNvcmRzXHJcbiAgICBsZXQgYWxsUmVjb3JkcyA9IHJlY29yZHMgfHwgW11cclxuICAgIG9mZnNldCA9IG9mZnNldCB8fCAwXHJcbiAgICBsZXQgcGFyYW0gPSB7XHJcbiAgICAgICAgYXBwOiBwYXJhbXMuYXBwLFxyXG4gICAgICAgIHF1ZXJ5OiAocGFyYW1zLnF1ZXJ5KSA/IGAke3BhcmFtcy5xdWVyeX0gbGltaXQgJHtMSU1JVH0gb2Zmc2V0ICR7b2Zmc2V0fWAgOiBgbGltaXQgJHtMSU1JVH0gb2Zmc2V0ICR7b2Zmc2V0fWAsXHJcbiAgICAgICAgZmllbGRzOiBwYXJhbXMuZmllbGRzIHx8IFtdXHJcbiAgICB9XHJcbiAgICBsZXQgaXNHdWVzdCA9IChwYXJhbXMuaXNHdWVzdCkgPyB0cnVlIDogZmFsc2VcclxuXHJcbiAgICByZXR1cm4gc2VuZFJlcXVlc3QoJy9rL3YxL3JlY29yZHMnLCAnR0VUJywgcGFyYW0sIGlzR3Vlc3QpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgYWxsUmVjb3JkcyA9IGFsbFJlY29yZHMuY29uY2F0KHJlc3BvbnNlLnJlY29yZHMpXHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLnJlY29yZHMubGVuZ3RoIDwgTElNSVQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJlY29yZHM6IGFsbFJlY29yZHNcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZ2V0QWxsUmVjb3Jkc0J5UXVlcnkocGFyYW1zLCBhbGxSZWNvcmRzLCBvZmZzZXQgKyBMSU1JVClcclxuICAgIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGdldEFsbFJlY29yZHNCeVF1ZXJ5XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2pzL3Jlc3QvZ2V0QWxsUmVjb3Jkc0J5UXVlcnkuanNcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IHtcblx0XCJyZWNvcmRzXCI6IDEwMCxcblx0XCJnZXRSZWNvcmRzXCI6IDUwMCxcblx0XCJ1cHNlcnRSZWNvcmRzXCI6IDE1MDAsXG5cdFwiYnVsa1wiOiAyMDAwXG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2pzb24tbG9hZGVyIS4vc3JjL2pzL3Jlc3QvcmVzb3VyY2UvbGltaXQuanNvblxuICoqIG1vZHVsZSBpZCA9IDdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImltcG9ydCBjcmVhdGVFcnJvciBmcm9tICcuL2NvbW1vbi9jcmVhdGVFcnJvcidcclxuaW1wb3J0IGVycm9ycyBmcm9tICchanNvbiEuL3Jlc291cmNlL2Vycm9yTWVzc2FnZXMuanNvbidcclxuaW1wb3J0IHNlbmRSZXF1ZXN0IGZyb20gJy4vY29tbW9uL3NlbmRSZXF1ZXN0J1xyXG5cclxuLyoqIEZ1bmN0aW9uOiBwb3N0UmVjb3JkXHJcbiAqICBAcGFyYW0ge29iamVjdH0gcGFyYW1zXHJcbiAqICBAcGFyYW0ge251bWJlcn0gcGFyYW1zLmFwcFxyXG4gKiAgQHBhcmFtIHtvYmplY3R9IHBhcmFtcy5yZWNvcmRcclxuICogIEBwYXJhbSB7Ym9vbGVhbn0gcGFyYW1zLmlzR3Vlc3RcclxuICpcclxuICogIEByZXR1cm4ge29iamVjdH0gcmVzdWx0XHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCAocGFyYW1zKSA9PiB7XHJcbiAgICAndXNlIHN0cmljdCdcclxuICAgIGlmICghKHBhcmFtcyAmJiBwYXJhbXMuYXBwKSkge1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVFcnJvcihlcnJvcnMucmVxdWlyZWQuYXBwKVxyXG4gICAgfVxyXG5cclxuICAgIGxldCBwYXJhbSA9IHtcclxuICAgICAgICBhcHA6IHBhcmFtcy5hcHAsXHJcbiAgICAgICAgcmVjb3JkOiBwYXJhbXMucmVjb3JkXHJcbiAgICB9XHJcbiAgICBsZXQgaXNHdWVzdCA9IChwYXJhbXMuaXNHdWVzdCkgPyB0cnVlIDogZmFsc2VcclxuXHJcbiAgICByZXR1cm4gc2VuZFJlcXVlc3QoJy9rL3YxL3JlY29yZCcsICdQT1NUJywgcGFyYW0sIGlzR3Vlc3QpXHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvanMvcmVzdC9wb3N0UmVjb3JkLmpzXG4gKiovIiwiaW1wb3J0IGNyZWF0ZUVycm9yIGZyb20gJy4vY29tbW9uL2NyZWF0ZUVycm9yJ1xyXG5pbXBvcnQgZXJyb3JzIGZyb20gJyFqc29uIS4vcmVzb3VyY2UvZXJyb3JNZXNzYWdlcy5qc29uJ1xyXG5pbXBvcnQgbWFrZUJ1bGtQYXJhbSBmcm9tICcuL2NvbW1vbi9tYWtlQnVsa1BhcmFtJ1xyXG5pbXBvcnQgc2VuZFJlcXVlc3QgZnJvbSAnLi9jb21tb24vc2VuZFJlcXVlc3QnXHJcbmltcG9ydCBsaW1pdCBmcm9tICchanNvbiEuL3Jlc291cmNlL2xpbWl0Lmpzb24nXHJcblxyXG4vKiogRnVuY3Rpb246IHBvc3RSZWNvcmRzXHJcbiAqICAgQ2FuJ3QgcmVnaXN0ZXIgb3ZlciAyMDAwIHJlY29yZHMuXHJcbiAqICAgSWYgcmVxdWVzdCBpcyBmYWlsZWQsIG5vIHJlY29yZCBpcyByZWdpc3RlcmQuXHJcbiAqICBAcGFyYW0ge29iamVjdH0gcGFyYW1zXHJcbiAqICBAcGFyYW0ge251bWJlcn0gcGFyYW1zLmFwcFxyXG4gKiAgQHBhcmFtIHthcnJheX0gcGFyYW1zLnJlY29yZHNcclxuICogIEBwYXJhbSB7Ym9vbGVhbn0gcGFyYW1zLmlzR3Vlc3RcclxuICpcclxuICogIEByZXR1cm4ge29iamVjdH0gcmVzdWx0XHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCAocGFyYW1zKSA9PiB7XHJcbiAgICAndXNlIHN0cmljdCdcclxuICAgIGlmICghKHBhcmFtcyAmJiBwYXJhbXMuYXBwKSkge1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVFcnJvcihlcnJvcnMucmVxdWlyZWQuYXBwKVxyXG4gICAgfSBlbHNlIGlmICghQXJyYXkuaXNBcnJheShwYXJhbXMucmVjb3JkcykpIHtcclxuICAgICAgICByZXR1cm4gY3JlYXRlRXJyb3IoZXJyb3JzLnNob3VsZEJlQXJyYXkucmVjb3JkcylcclxuICAgIH0gZWxzZSBpZiAocGFyYW1zLnJlY29yZHMgJiYgcGFyYW1zLnJlY29yZHMubGVuZ3RoID4gbGltaXQuYnVsaykge1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVFcnJvcihlcnJvcnMub3Zlckxlbmd0aC5yZWNvcmRzTGVzc1RoYW4yMDAwKVxyXG4gICAgfSBlbHNlIGlmIChwYXJhbXMucmVjb3JkcyAmJiBwYXJhbXMucmVjb3Jkcy5sZW5ndGggPCAxKSB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVycm9yKGVycm9ycy5lbXB0eUFycmF5LnJlY29yZHMpXHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHBhcmFtID0gbWFrZUJ1bGtQYXJhbSh7XHJcbiAgICAgICAgYXBwOiBwYXJhbXMuYXBwLFxyXG4gICAgICAgIHJlY29yZHM6IHBhcmFtcy5yZWNvcmRzLFxyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnXHJcbiAgICB9KVxyXG4gICAgbGV0IGlzR3Vlc3QgPSAocGFyYW1zLmlzR3Vlc3QpID8gdHJ1ZSA6IGZhbHNlXHJcblxyXG4gICAgcmV0dXJuIHNlbmRSZXF1ZXN0KCcvay92MS9idWxrUmVxdWVzdCcsICdQT1NUJywgcGFyYW0sIGlzR3Vlc3QpXHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvanMvcmVzdC9wb3N0UmVjb3Jkcy5qc1xuICoqLyIsImltcG9ydCBsaW1pdCBmcm9tICchanNvbiEuLi9yZXNvdXJjZS9saW1pdC5qc29uJ1xyXG5cclxuLyoqIEZ1bmN0aW9uOiB1cHNlcnRSZWNvcmRzXHJcbiAqICBAcGFyYW0ge29iamVjdH0gcGFyYW1zXHJcbiAqICBAcGFyYW0ge251bWJlcn0gcGFyYW1zLmFwcFxyXG4gKiAgQHBhcmFtIHthcnJheX0gcGFyYW1zLnJlY29yZHNcclxuICogIEBwYXJhbSB7YXJyYXl9IHBhcmFtcy5pZHNcclxuICogIEBwYXJhbSB7c3RyaW5nfSBwYXJhbXMubWV0aG9kXHJcbiAqXHJcbiAqICBAcmV0dXJuIHtvYmplY3R9IGJ1bGtQYXJhbVxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgKHBhcmFtcykgPT4ge1xyXG4gICAgY29uc3QgTElNSVQgPSBsaW1pdC5yZWNvcmRzXHJcbiAgICBsZXQgYnVsa1BhcmFtID0ge1xyXG4gICAgICAgIHJlcXVlc3RzOiBbXVxyXG4gICAgfVxyXG4gICAgbGV0IGxlbmd0aCA9IChwYXJhbXMucmVjb3JkcykgPyBwYXJhbXMucmVjb3Jkcy5sZW5ndGggOiBwYXJhbXMuaWRzLmxlbmd0aCBcclxuICAgIGxldCBsb29wVGltZXMgPSBNYXRoLmNlaWwobGVuZ3RoIC8gTElNSVQpXHJcbiAgICBsZXQgYmVnaW4gPSAwXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvb3BUaW1lczsgaSsrKSB7XHJcbiAgICAgICAgbGV0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogcGFyYW1zLm1ldGhvZCxcclxuICAgICAgICAgICAgYXBpOiAnL2svdjEvcmVjb3Jkcy5qc29uJyxcclxuICAgICAgICAgICAgcGF5bG9hZDoge1xyXG4gICAgICAgICAgICAgICAgYXBwOiBwYXJhbXMuYXBwXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHBhcmFtcy5yZWNvcmRzKSByZXF1ZXN0LnBheWxvYWQucmVjb3JkcyA9IHBhcmFtcy5yZWNvcmRzLnNsaWNlKGJlZ2luLCBiZWdpbiArIExJTUlUKVxyXG4gICAgICAgIGlmIChwYXJhbXMuaWRzKSByZXF1ZXN0LnBheWxvYWQuaWRzID0gcGFyYW1zLmlkcy5zbGljZShiZWdpbiwgYmVnaW4gKyBMSU1JVClcclxuICAgICAgICBidWxrUGFyYW0ucmVxdWVzdHMucHVzaChyZXF1ZXN0KVxyXG4gICAgICAgIGJlZ2luICs9IExJTUlUXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGJ1bGtQYXJhbVxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2pzL3Jlc3QvY29tbW9uL21ha2VCdWxrUGFyYW0uanNcbiAqKi8iLCJpbXBvcnQgY3JlYXRlRXJyb3IgZnJvbSAnLi9jb21tb24vY3JlYXRlRXJyb3InXHJcbmltcG9ydCBlcnJvcnMgZnJvbSAnIWpzb24hLi9yZXNvdXJjZS9lcnJvck1lc3NhZ2VzLmpzb24nXHJcbmltcG9ydCBwb3N0UmVjb3JkcyBmcm9tICcuL3Bvc3RSZWNvcmRzJ1xyXG5pbXBvcnQgc2xpY2VBcnJheSBmcm9tICcuL2NvbW1vbi9zbGljZUFycmF5J1xyXG5pbXBvcnQgbGltaXQgZnJvbSAnIWpzb24hLi9yZXNvdXJjZS9saW1pdC5qc29uJ1xyXG5cclxuLyoqIEZ1bmN0aW9uOiBwb3N0QWxsUmVjb3Jkc1xyXG4gKiAgIENhbiByZWdpc3RlciBvdmVyIDIwMDAgcmVjb3JkcywgYnV0IGNhbid0IGRvIHJvbGxiYWNrLlxyXG4gKiAgQHBhcmFtIHtvYmplY3R9IHBhcmFtc1xyXG4gKiAgQHBhcmFtIHtudW1iZXJ9IHBhcmFtcy5hcHBcclxuICogIEBwYXJhbSB7YXJyYXl9IHBhcmFtcy5yZWNvcmRzXHJcbiAqICBAcGFyYW0ge2Jvb2xlYW59IHBhcmFtcy5pc0d1ZXN0XHJcbiAqXHJcbiAqICBAcmV0dXJuIHtvYmplY3R9IHJlc3VsdFxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgKHBhcmFtcykgPT4ge1xyXG4gICAgJ3VzZSBzdHJpY3QnXHJcbiAgICBpZiAoIShwYXJhbXMgJiYgcGFyYW1zLmFwcCkpIHtcclxuICAgICAgICByZXR1cm4gY3JlYXRlRXJyb3IoZXJyb3JzLnJlcXVpcmVkLmFwcClcclxuICAgIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkocGFyYW1zLnJlY29yZHMpKSB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVycm9yKGVycm9ycy5zaG91bGRCZUFycmF5LnJlY29yZHMpXHJcbiAgICB9IGVsc2UgaWYgKHBhcmFtcy5yZWNvcmRzICYmIHBhcmFtcy5yZWNvcmRzLmxlbmd0aCA8IDEpIHtcclxuICAgICAgICByZXR1cm4gY3JlYXRlRXJyb3IoZXJyb3JzLmVtcHR5QXJyYXkucmVjb3JkcylcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcmVzdWx0cyA9IFtdXHJcblxyXG4gICAgbGV0IHBvc3RBbGwgPSAoYmVnaW4pID0+IHtcclxuICAgICAgICBiZWdpbiA9IGJlZ2luIHx8IDBcclxuICAgICAgICBsZXQgaXNHdWVzdCA9IChwYXJhbXMuaXNHdWVzdCkgPyB0cnVlIDogZmFsc2VcclxuICAgICAgICBsZXQgcGFyYW0gPSB7XHJcbiAgICAgICAgICAgIGFwcDogcGFyYW1zLmFwcCxcclxuICAgICAgICAgICAgcmVjb3Jkczogc2xpY2VBcnJheShwYXJhbXMucmVjb3JkcywgYmVnaW4pLFxyXG4gICAgICAgICAgICBpc0d1ZXN0OiBpc0d1ZXN0XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcG9zdFJlY29yZHMocGFyYW0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmNvbmNhdChyZXNwb25zZS5yZXN1bHRzKVxyXG4gICAgICAgICAgICBiZWdpbiArPSBsaW1pdC5idWxrXHJcbiAgICAgICAgICAgIGlmIChwYXJhbXMucmVjb3Jkcy5sZW5ndGggPD0gYmVnaW4pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0czogcmVzdWx0c1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBwb3N0QWxsKGJlZ2luKVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHBvc3RBbGwoKVxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2pzL3Jlc3QvcG9zdEFsbFJlY29yZHMuanNcbiAqKi8iLCJpbXBvcnQgbGltaXQgZnJvbSAnIWpzb24hLi4vcmVzb3VyY2UvbGltaXQuanNvbidcclxuXHJcbi8qKiBGdW5jdGlvbjogc2xpY2VBcnJheVxyXG4gKiAgQHBhcmFtIHthcnJheX0gYXJyXHJcbiAqICBAcGFyYW0ge251bWJlcn0gYmVnaW5cclxuICpcclxuICogIEByZXR1cm4ge29iamVjdH0gcmVzdWx0XHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCAoYXJyLCBiZWdpbikgPT4ge1xyXG4gICAgbGV0IGVuZCA9ICgoYXJyLmxlbmd0aCAtIGJlZ2luKSA+IGxpbWl0LmJ1bGspID8gYmVnaW4gKyBsaW1pdC5idWxrIDogYXJyLmxlbmd0aFxyXG4gICAgcmV0dXJuIGFyci5zbGljZShiZWdpbiwgZW5kKVxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2pzL3Jlc3QvY29tbW9uL3NsaWNlQXJyYXkuanNcbiAqKi8iLCJpbXBvcnQgY3JlYXRlRXJyb3IgZnJvbSAnLi9jb21tb24vY3JlYXRlRXJyb3InXHJcbmltcG9ydCBlcnJvcnMgZnJvbSAnIWpzb24hLi9yZXNvdXJjZS9lcnJvck1lc3NhZ2VzLmpzb24nXHJcbmltcG9ydCBzZW5kUmVxdWVzdCBmcm9tICcuL2NvbW1vbi9zZW5kUmVxdWVzdCdcclxuXHJcbi8qKiBGdW5jdGlvbjogcHV0UmVjb3JkXHJcbiAqICBAcGFyYW0ge29iamVjdH0gcGFyYW1zXHJcbiAqICBAcGFyYW0ge251bWJlcn0gcGFyYW1zLmFwcFxyXG4gKiAgQHBhcmFtIHtudW1iZXJ9IHBhcmFtcy5pZFxyXG4gKiAgQHBhcmFtIHtvYmplY3R9IHBhcmFtcy51cGRhdGVLZXlcclxuICogIEBwYXJhbSB7c3RyaW5nfSBwYXJhbXMudXBkYXRlS2V5LmZpZWxkXHJcbiAqICBAcGFyYW0ge3N0cmluZ30gcGFyYW1zLnVwZGF0ZUtleS52YWx1ZVxyXG4gKiAgQHBhcmFtIHtudW1iZXJ9IHBhcmFtcy5yZXZpc2lvblxyXG4gKiAgQHBhcmFtIHtvYmplY3R9IHBhcmFtcy5yZWNvcmRcclxuICogIEBwYXJhbSB7Ym9vbGVhbn0gcGFyYW1zLmlzR3Vlc3RcclxuICpcclxuICogIEByZXR1cm4ge29iamVjdH0gcmVzdWx0XHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCAocGFyYW1zKSA9PiB7XHJcbiAgICAndXNlIHN0cmljdCdcclxuICAgIGlmICghKHBhcmFtcyAmJiBwYXJhbXMuYXBwKSkge1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVFcnJvcihlcnJvcnMucmVxdWlyZWQuYXBwKVxyXG4gICAgfSBlbHNlIGlmICghcGFyYW1zLmlkICYmICFwYXJhbXMudXBkYXRlS2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVycm9yKGVycm9ycy5yZXF1aXJlZC5pZE9yVXBkYXRlS2V5KVxyXG4gICAgfVxyXG5cclxuICAgIGxldCBwYXJhbSA9IHtcclxuICAgICAgICBhcHA6IHBhcmFtcy5hcHAsXHJcbiAgICAgICAgcmVjb3JkOiBwYXJhbXMucmVjb3JkXHJcbiAgICB9XHJcbiAgICBpZiAocGFyYW1zLnJldmlzaW9uKSB7XHJcbiAgICAgICAgcGFyYW0ucmV2aXNpb24gPSBwYXJhbXMucmV2aXNpb25cclxuICAgIH1cclxuICAgIGlmIChwYXJhbXMuaWQpIHtcclxuICAgICAgICBwYXJhbS5pZCA9IHBhcmFtcy5pZFxyXG4gICAgfSBlbHNlIGlmIChwYXJhbXMudXBkYXRlS2V5KSB7XHJcbiAgICAgICAgcGFyYW0udXBkYXRlS2V5ID0gcGFyYW1zLnVwZGF0ZUtleVxyXG4gICAgfVxyXG5cclxuICAgIGxldCBpc0d1ZXN0ID0gKHBhcmFtcy5pc0d1ZXN0KSA/IHRydWUgOiBmYWxzZVxyXG5cclxuICAgIHJldHVybiBzZW5kUmVxdWVzdCgnL2svdjEvcmVjb3JkJywgJ1BVVCcsIHBhcmFtLCBpc0d1ZXN0KVxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2pzL3Jlc3QvcHV0UmVjb3JkLmpzXG4gKiovIiwiaW1wb3J0IGNyZWF0ZUVycm9yIGZyb20gJy4vY29tbW9uL2NyZWF0ZUVycm9yJ1xyXG5pbXBvcnQgZXJyb3JzIGZyb20gJyFqc29uIS4vcmVzb3VyY2UvZXJyb3JNZXNzYWdlcy5qc29uJ1xyXG5pbXBvcnQgbWFrZUJ1bGtQYXJhbSBmcm9tICcuL2NvbW1vbi9tYWtlQnVsa1BhcmFtJ1xyXG5pbXBvcnQgc2VuZFJlcXVlc3QgZnJvbSAnLi9jb21tb24vc2VuZFJlcXVlc3QnXHJcbmltcG9ydCBsaW1pdCBmcm9tICchanNvbiEuL3Jlc291cmNlL2xpbWl0Lmpzb24nXHJcblxyXG4vKiogRnVuY3Rpb246IHB1dFJlY29yZHNcclxuICogICBDYW4ndCB1cGRhdGUgb3ZlciAyMDAwIHJlY29yZHMuXHJcbiAqICAgSWYgcmVxdWVzdCBpcyBmYWlsZWQsIG5vIHJlY29yZCBpcyB1cGRhdGVkLlxyXG4gKiAgQHBhcmFtIHtvYmplY3R9IHBhcmFtc1xyXG4gKiAgQHBhcmFtIHtudW1iZXJ9IHBhcmFtcy5hcHBcclxuICogIEBwYXJhbSB7YXJyYXl9IHBhcmFtcy5yZWNvcmRzXHJcbiAqICBAcGFyYW0ge2Jvb2xlYW59IHBhcmFtcy5pc0d1ZXN0XHJcbiAqXHJcbiAqICBAcmV0dXJuIHtvYmplY3R9IHJlc3VsdFxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgKHBhcmFtcykgPT4ge1xyXG4gICAgJ3VzZSBzdHJpY3QnXHJcbiAgICBpZiAoIShwYXJhbXMgJiYgcGFyYW1zLmFwcCkpIHtcclxuICAgICAgICByZXR1cm4gY3JlYXRlRXJyb3IoZXJyb3JzLnJlcXVpcmVkLmFwcClcclxuICAgIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkocGFyYW1zLnJlY29yZHMpKSB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVycm9yKGVycm9ycy5zaG91bGRCZUFycmF5LnJlY29yZHMpXHJcbiAgICB9IGVsc2UgaWYgKHBhcmFtcy5yZWNvcmRzICYmIHBhcmFtcy5yZWNvcmRzLmxlbmd0aCA+IGxpbWl0LmJ1bGspIHtcclxuICAgICAgICByZXR1cm4gY3JlYXRlRXJyb3IoZXJyb3JzLm92ZXJMZW5ndGgucmVjb3Jkc0xlc3NUaGFuMjAwMClcclxuICAgIH0gZWxzZSBpZiAocGFyYW1zLnJlY29yZHMgJiYgcGFyYW1zLnJlY29yZHMubGVuZ3RoIDwgMSkge1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVFcnJvcihlcnJvcnMuZW1wdHlBcnJheS5yZWNvcmRzKVxyXG4gICAgfVxyXG5cclxuICAgIGxldCBwYXJhbSA9IG1ha2VCdWxrUGFyYW0oe1xyXG4gICAgICAgIGFwcDogcGFyYW1zLmFwcCxcclxuICAgICAgICByZWNvcmRzOiBwYXJhbXMucmVjb3JkcyxcclxuICAgICAgICBtZXRob2Q6ICdQVVQnXHJcbiAgICB9KVxyXG4gICAgbGV0IGlzR3Vlc3QgPSAocGFyYW1zLmlzR3Vlc3QpID8gdHJ1ZSA6IGZhbHNlXHJcblxyXG4gICAgcmV0dXJuIHNlbmRSZXF1ZXN0KCcvay92MS9idWxrUmVxdWVzdCcsICdQT1NUJywgcGFyYW0sIGlzR3Vlc3QpXHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvanMvcmVzdC9wdXRSZWNvcmRzLmpzXG4gKiovIiwiaW1wb3J0IGNyZWF0ZUVycm9yIGZyb20gJy4vY29tbW9uL2NyZWF0ZUVycm9yJ1xyXG5pbXBvcnQgZXJyb3JzIGZyb20gJyFqc29uIS4vcmVzb3VyY2UvZXJyb3JNZXNzYWdlcy5qc29uJ1xyXG5pbXBvcnQgcHV0UmVjb3JkcyBmcm9tICcuL3B1dFJlY29yZHMnXHJcbmltcG9ydCBzbGljZUFycmF5IGZyb20gJy4vY29tbW9uL3NsaWNlQXJyYXknXHJcbmltcG9ydCBsaW1pdCBmcm9tICchanNvbiEuL3Jlc291cmNlL2xpbWl0Lmpzb24nXHJcblxyXG4vKiogRnVuY3Rpb246IHB1dEFsbFJlY29yZHNcclxuICogICBDYW4gdXBkYXRlIG92ZXIgMjAwMCByZWNvcmRzLCBidXQgY2FuJ3QgZG8gcm9sbGJhY2suXHJcbiAqICBAcGFyYW0ge29iamVjdH0gcGFyYW1zXHJcbiAqICBAcGFyYW0ge251bWJlcn0gcGFyYW1zLmFwcFxyXG4gKiAgQHBhcmFtIHthcnJheX0gcGFyYW1zLnJlY29yZHNcclxuICogIEBwYXJhbSB7Ym9vbGVhbn0gcGFyYW1zLmlzR3Vlc3RcclxuICpcclxuICogIEByZXR1cm4ge29iamVjdH0gcmVzdWx0XHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCAocGFyYW1zKSA9PiB7XHJcbiAgICAndXNlIHN0cmljdCdcclxuICAgIGlmICghKHBhcmFtcyAmJiBwYXJhbXMuYXBwKSkge1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVFcnJvcihlcnJvcnMucmVxdWlyZWQuYXBwKVxyXG4gICAgfSBlbHNlIGlmICghQXJyYXkuaXNBcnJheShwYXJhbXMucmVjb3JkcykpIHtcclxuICAgICAgICByZXR1cm4gY3JlYXRlRXJyb3IoZXJyb3JzLnNob3VsZEJlQXJyYXkucmVjb3JkcylcclxuICAgIH0gZWxzZSBpZiAocGFyYW1zLnJlY29yZHMgJiYgcGFyYW1zLnJlY29yZHMubGVuZ3RoIDwgMSkge1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVFcnJvcihlcnJvcnMuZW1wdHlBcnJheS5yZWNvcmRzKVxyXG4gICAgfVxyXG5cclxuICAgIGxldCByZXN1bHRzID0gW11cclxuXHJcbiAgICBsZXQgcHV0QWxsID0gKGJlZ2luKSA9PiB7XHJcbiAgICAgICAgYmVnaW4gPSBiZWdpbiB8fCAwXHJcbiAgICAgICAgbGV0IGlzR3Vlc3QgPSAocGFyYW1zLmlzR3Vlc3QpID8gdHJ1ZSA6IGZhbHNlXHJcbiAgICAgICAgbGV0IHBhcmFtID0ge1xyXG4gICAgICAgICAgICBhcHA6IHBhcmFtcy5hcHAsXHJcbiAgICAgICAgICAgIHJlY29yZHM6IHNsaWNlQXJyYXkocGFyYW1zLnJlY29yZHMsIGJlZ2luKSxcclxuICAgICAgICAgICAgaXNHdWVzdDogaXNHdWVzdFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHB1dFJlY29yZHMocGFyYW0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmNvbmNhdChyZXNwb25zZS5yZXN1bHRzKVxyXG4gICAgICAgICAgICBiZWdpbiArPSBsaW1pdC5idWxrXHJcbiAgICAgICAgICAgIGlmIChwYXJhbXMucmVjb3Jkcy5sZW5ndGggPD0gYmVnaW4pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0czogcmVzdWx0c1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBwdXRBbGwoYmVnaW4pXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcHV0QWxsKClcclxufVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9qcy9yZXN0L3B1dEFsbFJlY29yZHMuanNcbiAqKi8iLCJpbXBvcnQgY3JlYXRlRXJyb3IgZnJvbSAnLi9jb21tb24vY3JlYXRlRXJyb3InXHJcbmltcG9ydCBlcnJvcnMgZnJvbSAnIWpzb24hLi9yZXNvdXJjZS9lcnJvck1lc3NhZ2VzLmpzb24nXHJcbmltcG9ydCBtYWtlQnVsa1BhcmFtIGZyb20gJy4vY29tbW9uL21ha2VCdWxrUGFyYW0nXHJcbmltcG9ydCBzZW5kUmVxdWVzdCBmcm9tICcuL2NvbW1vbi9zZW5kUmVxdWVzdCdcclxuaW1wb3J0IGxpbWl0IGZyb20gJyFqc29uIS4vcmVzb3VyY2UvbGltaXQuanNvbidcclxuXHJcbi8qKiBGdW5jdGlvbjogZGVsZXRlUmVjb3Jkc1xyXG4gKiAgIENhbid0IGRlbGV0ZSBvdmVyIDIwMDAgcmVjb3Jkcy5cclxuICogICBJZiByZXF1ZXN0IGlzIGZhaWxlZCwgbm8gcmVjb3JkIGlzIGRlbGV0ZWQuXHJcbiAqICBAcGFyYW0ge29iamVjdH0gcGFyYW1zXHJcbiAqICBAcGFyYW0ge251bWJlcn0gcGFyYW1zLmFwcFxyXG4gKiAgQHBhcmFtIHthcnJheX0gcGFyYW1zLmlkc1xyXG4gKiAgQHBhcmFtIHthcnJheX0gcGFyYW1zLnJldmlzaW9uc1xyXG4gKiAgQHBhcmFtIHtib29sZWFufSBwYXJhbXMuaXNHdWVzdFxyXG4gKlxyXG4gKiAgQHJldHVybiB7b2JqZWN0fSByZXN1bHRcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IChwYXJhbXMpID0+IHtcclxuICAgICd1c2Ugc3RyaWN0J1xyXG4gICAgaWYgKCEocGFyYW1zICYmIHBhcmFtcy5hcHApKSB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVycm9yKGVycm9ycy5yZXF1aXJlZC5hcHApXHJcbiAgICB9IGVsc2UgaWYgKCFBcnJheS5pc0FycmF5KHBhcmFtcy5pZHMpKSB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVycm9yKGVycm9ycy5zaG91bGRCZUFycmF5LmlkcylcclxuICAgIH0gZWxzZSBpZiAocGFyYW1zLmlkcyAmJiBwYXJhbXMuaWRzLmxlbmd0aCA+IGxpbWl0LmJ1bGspIHtcclxuICAgICAgICByZXR1cm4gY3JlYXRlRXJyb3IoZXJyb3JzLm92ZXJMZW5ndGguaWRzKVxyXG4gICAgfSBlbHNlIGlmIChwYXJhbXMuaWRzICYmIHBhcmFtcy5pZHMubGVuZ3RoIDwgMSkge1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVFcnJvcihlcnJvcnMuZW1wdHlBcnJheS5pZHMpXHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHBhcmFtID0gbWFrZUJ1bGtQYXJhbSh7XHJcbiAgICAgICAgYXBwOiBwYXJhbXMuYXBwLFxyXG4gICAgICAgIGlkczogcGFyYW1zLmlkcyxcclxuICAgICAgICBtZXRob2Q6ICdERUxFVEUnXHJcbiAgICB9KVxyXG4gICAgaWYgKHBhcmFtcy5yZXZpc2lvbnMpIHtcclxuICAgICAgICBwYXJhbS5yZXZpc2lvbnMgPSBwYXJhbXMucmV2aXNpb25zXHJcbiAgICB9XHJcbiAgICBsZXQgaXNHdWVzdCA9IChwYXJhbXMuaXNHdWVzdCkgPyB0cnVlIDogZmFsc2VcclxuXHJcbiAgICByZXR1cm4gc2VuZFJlcXVlc3QoJy9rL3YxL2J1bGtSZXF1ZXN0JywgJ1BPU1QnLCBwYXJhbSwgaXNHdWVzdClcclxufVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9qcy9yZXN0L2RlbGV0ZVJlY29yZHMuanNcbiAqKi8iLCJpbXBvcnQgY3JlYXRlRXJyb3IgZnJvbSAnLi9jb21tb24vY3JlYXRlRXJyb3InXHJcbmltcG9ydCBlcnJvcnMgZnJvbSAnIWpzb24hLi9yZXNvdXJjZS9lcnJvck1lc3NhZ2VzLmpzb24nXHJcbmltcG9ydCBkZWxldGVSZWNvcmRzIGZyb20gJy4vZGVsZXRlUmVjb3JkcydcclxuaW1wb3J0IHNsaWNlQXJyYXkgZnJvbSAnLi9jb21tb24vc2xpY2VBcnJheSdcclxuaW1wb3J0IGxpbWl0IGZyb20gJyFqc29uIS4vcmVzb3VyY2UvbGltaXQuanNvbidcclxuXHJcbi8qKiBGdW5jdGlvbjogZGVsZXRlQWxsUmVjb3Jkc1xyXG4gKiAgIENhbiBkZWxldGUgb3ZlciAyMDAwIHJlY29yZHMsIGJ1dCBjYW4ndCBkbyByb2xsYmFjay5cclxuICogIEBwYXJhbSB7b2JqZWN0fSBwYXJhbXNcclxuICogIEBwYXJhbSB7bnVtYmVyfSBwYXJhbXMuYXBwXHJcbiAqICBAcGFyYW0ge2FycmF5fSBwYXJhbXMuaWRzXHJcbiAqICBAcGFyYW0ge2Jvb2xlYW59IHBhcmFtcy5pc0d1ZXN0XHJcbiAqXHJcbiAqICBAcmV0dXJuIHtvYmplY3R9IHJlc3VsdFxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgKHBhcmFtcykgPT4ge1xyXG4gICAgJ3VzZSBzdHJpY3QnXHJcbiAgICBpZiAoIShwYXJhbXMgJiYgcGFyYW1zLmFwcCkpIHtcclxuICAgICAgICByZXR1cm4gY3JlYXRlRXJyb3IoZXJyb3JzLnJlcXVpcmVkLmFwcClcclxuICAgIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkocGFyYW1zLmlkcykpIHtcclxuICAgICAgICByZXR1cm4gY3JlYXRlRXJyb3IoZXJyb3JzLnNob3VsZEJlQXJyYXkuaWRzKVxyXG4gICAgfSBlbHNlIGlmIChwYXJhbXMuaWRzICYmIHBhcmFtcy5pZHMubGVuZ3RoIDwgMSkge1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVFcnJvcihlcnJvcnMuZW1wdHlBcnJheS5pZHMpXHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHJlc3VsdHMgPSBbXVxyXG5cclxuICAgIGxldCBkZWxldGVBbGwgPSAoYmVnaW4pID0+IHtcclxuICAgICAgICBiZWdpbiA9IGJlZ2luIHx8IDBcclxuICAgICAgICBsZXQgaXNHdWVzdCA9IChwYXJhbXMuaXNHdWVzdCkgPyB0cnVlIDogZmFsc2VcclxuICAgICAgICBsZXQgcGFyYW0gPSB7XHJcbiAgICAgICAgICAgIGFwcDogcGFyYW1zLmFwcCxcclxuICAgICAgICAgICAgaWRzOiBzbGljZUFycmF5KHBhcmFtcy5pZHMsIGJlZ2luKSxcclxuICAgICAgICAgICAgaXNHdWVzdDogaXNHdWVzdFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGRlbGV0ZVJlY29yZHMocGFyYW0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmNvbmNhdChyZXNwb25zZS5yZXN1bHRzKVxyXG4gICAgICAgICAgICBiZWdpbiArPSBsaW1pdC5idWxrXHJcbiAgICAgICAgICAgIGlmIChwYXJhbXMuaWRzLmxlbmd0aCA8PSBiZWdpbikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzOiByZXN1bHRzXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGRlbGV0ZUFsbChiZWdpbilcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkZWxldGVBbGwoKVxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2pzL3Jlc3QvZGVsZXRlQWxsUmVjb3Jkcy5qc1xuICoqLyIsImltcG9ydCBnZXRBbGxSZWNvcmRzQnlRdWVyeSBmcm9tICcuL2dldEFsbFJlY29yZHNCeVF1ZXJ5J1xyXG5pbXBvcnQgZGVsZXRlQWxsUmVjb3JkcyBmcm9tICcuL2RlbGV0ZUFsbFJlY29yZHMnXHJcblxyXG4vKiogRnVuY3Rpb246IGRlbGV0ZUFsbFJlY29yZHNCeVF1ZXJ5XHJcbiAqICAgQ2FuIGRlbGV0ZSBvdmVyIDIwMDAgcmVjb3JkcywgYnV0IGNhbid0IGRvIHJvbGxiYWNrLlxyXG4gKiAgQHBhcmFtIHtvYmplY3R9IHBhcmFtc1xyXG4gKiAgQHBhcmFtIHtudW1iZXJ9IHBhcmFtcy5hcHBcclxuICogIEBwYXJhbSB7c3RyaW5nfSBwYXJhbXMucXVlcnlcclxuICogIEBwYXJhbSB7Ym9vbGVhbn0gcGFyYW1zLmlzR3Vlc3RcclxuICpcclxuICogIEByZXR1cm4ge29iamVjdH0gcmVzdWx0XHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCAocGFyYW1zKSA9PiB7XHJcbiAgICAndXNlIHN0cmljdCdcclxuICAgIFxyXG4gICAgcGFyYW1zLmZpZWxkcyA9IFsnJGlkJ11cclxuICAgIHJldHVybiBnZXRBbGxSZWNvcmRzQnlRdWVyeShwYXJhbXMpLnRoZW4oKHJlc3ApID0+IHtcclxuICAgICAgICBsZXQgaWRzID0gW11cclxuICAgICAgICBsZXQgcmVjb3JkcyA9IHJlc3AucmVjb3Jkc1xyXG4gICAgICAgIGlmICghcmVjb3JkcyB8fCAhcmVjb3Jkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHt9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVjb3Jkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZHMucHVzaChyZWNvcmRzW2ldLiRpZC52YWx1ZSlcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHBhcmFtID0ge1xyXG4gICAgICAgICAgICBhcHA6IHBhcmFtcy5hcHAsXHJcbiAgICAgICAgICAgIGlkczogaWRzLFxyXG4gICAgICAgICAgICBpc0d1ZXN0OiBwYXJhbXMuaXNHdWVzdFxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGVsZXRlQWxsUmVjb3JkcyhwYXJhbSkudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlXHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn1cclxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvanMvcmVzdC9kZWxldGVBbGxSZWNvcmRzQnlRdWVyeS5qc1xuICoqLyIsImltcG9ydCBjcmVhdGVFcnJvciBmcm9tICcuL2NvbW1vbi9jcmVhdGVFcnJvcidcclxuaW1wb3J0IGVycm9ycyBmcm9tICchanNvbiEuL3Jlc291cmNlL2Vycm9yTWVzc2FnZXMuanNvbidcclxuaW1wb3J0IGdldFJlY29yZHMgZnJvbSAnLi9nZXRSZWNvcmRzJ1xyXG5pbXBvcnQgcG9zdFJlY29yZCBmcm9tICcuL3Bvc3RSZWNvcmQnXHJcbmltcG9ydCBwdXRSZWNvcmQgZnJvbSAnLi9wdXRSZWNvcmQnXHJcblxyXG4vKiogRnVuY3Rpb246IHVwc2VydFJlY29yZFxyXG4gKiAgQHBhcmFtIHtvYmplY3R9IHBhcmFtc1xyXG4gKiAgQHBhcmFtIHtudW1iZXJ9IHBhcmFtcy5hcHBcclxuICogIEBwYXJhbSB7b2JqZWN0fSBwYXJhbXMudXBkYXRlS2V5XHJcbiAqICBAcGFyYW0ge3N0cmluZ30gcGFyYW1zLnVwZGF0ZUtleS5maWVsZFxyXG4gKiAgQHBhcmFtIHtzdHJpbmd9IHBhcmFtcy51cGRhdGVLZXkudmFsdWVcclxuICogIEBwYXJhbSB7b2JqZWN0fSBwYXJhbXMucmVjb3JkXHJcbiAqICBAcGFyYW0ge2Jvb2xlYW59IHBhcmFtcy5pc0d1ZXN0XHJcbiAqXHJcbiAqICBAcmV0dXJuIHtvYmplY3R9IHJlc3VsdFxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgKHBhcmFtcykgPT4ge1xyXG4gICAgJ3VzZSBzdGlpcmljdCdcclxuICAgIGlmICghKHBhcmFtcyAmJiBwYXJhbXMuYXBwKSkge1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVFcnJvcihlcnJvcnMucmVxdWlyZWQuYXBwKVxyXG4gICAgfSBlbHNlIGlmICghcGFyYW1zLnVwZGF0ZUtleSB8fCAhcGFyYW1zLnVwZGF0ZUtleS5maWVsZCB8fCAoIXBhcmFtcy51cGRhdGVLZXkudmFsdWUgJiYgcGFyYW1zLnVwZGF0ZUtleS52YWx1ZSAhPT0gJycpKSB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVycm9yKGVycm9ycy5yZXF1aXJlZC51cGRhdGVLZXkpXHJcbiAgICB9XHJcblxyXG4gICAgcGFyYW1zLnF1ZXJ5ID0gYCR7cGFyYW1zLnVwZGF0ZUtleS5maWVsZH0gPSBcIiR7cGFyYW1zLnVwZGF0ZUtleS52YWx1ZX1cImBcclxuICAgIHJldHVybiBnZXRSZWNvcmRzKHBhcmFtcykudGhlbigocmVzcCkgPT4ge1xyXG4gICAgICAgIGlmIChwYXJhbXMudXBkYXRlS2V5LnZhbHVlID09PSAnJyB8fCByZXNwLnJlY29yZHMubGVuZ3RoIDwgMSkge1xyXG4gICAgICAgICAgICAvL3Bvc3RcclxuICAgICAgICAgICAgcGFyYW1zLnJlY29yZFtwYXJhbXMudXBkYXRlS2V5LmZpZWxkXSA9IHtcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBwYXJhbXMudXBkYXRlS2V5LnZhbHVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHBvc3RSZWNvcmQocGFyYW1zKVxyXG4gICAgICAgIH0gZWxzZSBpZiAocmVzcC5yZWNvcmRzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAvL3B1dFxyXG4gICAgICAgICAgICByZXR1cm4gcHV0UmVjb3JkKHBhcmFtcylcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvL25vdCB1bmlxdWVcclxuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUVycm9yKGVycm9ycy5ub3RVbmlxdWVGaWVsZClcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59XHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2pzL3Jlc3QvdXBzZXJ0UmVjb3JkLmpzXG4gKiovIiwiaW1wb3J0IGNyZWF0ZUVycm9yIGZyb20gJy4vY29tbW9uL2NyZWF0ZUVycm9yJ1xyXG5pbXBvcnQgZXJyb3JzIGZyb20gJyFqc29uIS4vcmVzb3VyY2UvZXJyb3JNZXNzYWdlcy5qc29uJ1xyXG5pbXBvcnQgbWFrZUJ1bGtQYXJhbSBmcm9tICcuL2NvbW1vbi9tYWtlQnVsa1BhcmFtJ1xyXG5pbXBvcnQgZ2V0QWxsUmVjb3Jkc0J5UXVlcnkgZnJvbSAnLi9nZXRBbGxSZWNvcmRzQnlRdWVyeSdcclxuaW1wb3J0IHBvc3RBbGxSZWNvcmRzIGZyb20gJy4vcG9zdEFsbFJlY29yZHMnXHJcbmltcG9ydCBwdXRBbGxSZWNvcmRzIGZyb20gJy4vcHV0QWxsUmVjb3JkcydcclxuaW1wb3J0IHNlbmRSZXF1ZXN0IGZyb20gJy4vY29tbW9uL3NlbmRSZXF1ZXN0J1xyXG5pbXBvcnQgbGltaXQgZnJvbSAnIWpzb24hLi9yZXNvdXJjZS9saW1pdC5qc29uJ1xyXG5cclxuLyoqIEZ1bmN0aW9uOiB1cHNlcnRSZWNvcmRzXHJcbiAqICBDYW4ndCB1cHNlcnQgb3ZlciAxNTAwIHJlY29yZHMuXHJcbiAqICAgSWYgcmVxdWVzdCBpcyBmYWlsZWQsIG5vIHJlY29yZCBpcyBpbnNlcnRlZCBhbmQgdXBkYXRlZC5cclxuICogIEBwYXJhbSB7b2JqZWN0fSBwYXJhbXNcclxuICogIEBwYXJhbSB7bnVtYmVyfSBwYXJhbXMuYXBwXHJcbiAqICBAcGFyYW0ge2FycmF5fSBwYXJhbXMucmVjb3Jkc1xyXG4gKiAgQHBhcmFtIHtib29sZWFufSBwYXJhbXMuaXNHdWVzdFxyXG4gKlxyXG4gKiAgQHJldHVybiB7b2JqZWN0fSByZXN1bHRcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IChwYXJhbXMpID0+IHtcclxuICAgICd1c2Ugc3RyaWN0J1xyXG4gICAgaWYgKCEocGFyYW1zICYmIHBhcmFtcy5hcHApKSB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVycm9yKGVycm9ycy5yZXF1aXJlZC5hcHApXHJcbiAgICB9IGVsc2UgaWYgKCFBcnJheS5pc0FycmF5KHBhcmFtcy5yZWNvcmRzKSkge1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVFcnJvcihlcnJvcnMuc2hvdWxkQmVBcnJheS5yZWNvcmRzKVxyXG4gICAgfSBlbHNlIGlmIChwYXJhbXMucmVjb3JkcyAmJiBwYXJhbXMucmVjb3Jkcy5sZW5ndGggPiBsaW1pdC51cHNlcnRSZWNvcmRzKSB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVycm9yKGVycm9ycy5vdmVyTGVuZ3RoLnJlY29yZHNMZXNzVGhhbjE1MDApXHJcbiAgICB9IGVsc2UgaWYgKHBhcmFtcy5yZWNvcmRzICYmIHBhcmFtcy5yZWNvcmRzLmxlbmd0aCA8IDEpIHtcclxuICAgICAgICByZXR1cm4gY3JlYXRlRXJyb3IoZXJyb3JzLmVtcHR5QXJyYXkucmVjb3JkcylcclxuICAgIH1cclxuXHJcbiAgICBsZXQgZG9lc0V4aXN0U2FtZUZpZWxkVmFsdWUgPSAoYWxsUmVjb3JkcywgY29tcGFyZWRSZWNvcmQpID0+IHtcclxuICAgICAgICBpZiAoY29tcGFyZWRSZWNvcmQudXBkYXRlS2V5LnZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICAvL3VwZGF0ZUtleS52YWx1ZSBpcyAnJyA9PiBwb3N0XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbFJlY29yZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGFsbFJlY29yZHNbaV1bY29tcGFyZWRSZWNvcmQudXBkYXRlS2V5LmZpZWxkXS52YWx1ZSA9PT0gY29tcGFyZWRSZWNvcmQudXBkYXRlS2V5LnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAvL2V4aXN0ID0+IHB1dFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvL2RvZXNuJ3QgZXhpc3QgPT4gcG9zdFxyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG5cclxuICAgIGxldCBzZW5kVXBzZXJ0QnVsa1JlcXVlc3QgPSAocG9zdFJlY29yZHMsIHB1dFJlY29yZHMpID0+IHtcclxuICAgICAgICBsZXQgcG9zdEJ1bGtQYXJhbSA9IG1ha2VCdWxrUGFyYW0oe1xyXG4gICAgICAgICAgICBhcHA6IHBhcmFtcy5hcHAsXHJcbiAgICAgICAgICAgIHJlY29yZHM6IHBvc3RSZWNvcmRzLFxyXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgbGV0IHB1dEJ1bGtQYXJhbSA9IG1ha2VCdWxrUGFyYW0oe1xyXG4gICAgICAgICAgICBhcHA6IHBhcmFtcy5hcHAsXHJcbiAgICAgICAgICAgIHJlY29yZHM6IHB1dFJlY29yZHMsXHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCdcclxuICAgICAgICB9KVxyXG4gICAgICAgIGxldCBwYXJhbSA9IHtcclxuICAgICAgICAgICAgcmVxdWVzdHM6IHBvc3RCdWxrUGFyYW0ucmVxdWVzdHMuY29uY2F0KHB1dEJ1bGtQYXJhbS5yZXF1ZXN0cylcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGlzR3Vlc3QgPSAocGFyYW1zLmlzR3Vlc3QpID8gdHJ1ZSA6IGZhbHNlXHJcblxyXG4gICAgICAgIHJldHVybiBzZW5kUmVxdWVzdCgnL2svdjEvYnVsa1JlcXVlc3QnLCAnUE9TVCcsIHBhcmFtLCBpc0d1ZXN0KVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBnZXRBbGxSZWNvcmRzQnlRdWVyeShwYXJhbXMpLnRoZW4oKHJlc3ApID0+IHtcclxuICAgICAgICBsZXQgYWxsUmVjb3JkcyA9IHJlc3AucmVjb3Jkc1xyXG4gICAgICAgIGxldCByZWNvcmRzID0gcGFyYW1zLnJlY29yZHNcclxuICAgICAgICBsZXQgcHV0UmVjb3JkcyA9IFtdXHJcbiAgICAgICAgbGV0IHBvc3RSZWNvcmRzID0gW11cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlY29yZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGRvZXNFeGlzdFNhbWVGaWVsZFZhbHVlKGFsbFJlY29yZHMsIHJlY29yZHNbaV0pKSB7XHJcbiAgICAgICAgICAgICAgICBwdXRSZWNvcmRzLnB1c2gocmVjb3Jkc1tpXSlcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxldCByZWNvcmQgPSByZWNvcmRzW2ldLnJlY29yZFxyXG4gICAgICAgICAgICAgICAgcmVjb3JkW3JlY29yZHNbaV0udXBkYXRlS2V5LmZpZWxkXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVjb3Jkc1tpXS51cGRhdGVLZXkudmFsdWVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHBvc3RSZWNvcmRzLnB1c2gocmVjb3JkKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gc2VuZFVwc2VydEJ1bGtSZXF1ZXN0KHBvc3RSZWNvcmRzLCBwdXRSZWNvcmRzKVxyXG4gICAgfSlcclxufVxyXG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9qcy9yZXN0L3Vwc2VydFJlY29yZHMuanNcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9